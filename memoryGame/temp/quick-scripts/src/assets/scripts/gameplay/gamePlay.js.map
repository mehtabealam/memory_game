{"version":3,"sources":["assets/scripts/gameplay/gamePlay.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport {GameManager} from \"../managers/GameManager\"\nimport { GAME_MODE, END_POP_UP, GAME_SCREEN } from \"../helper/constants\";\nimport SoundManager from \"../managers/SoundManager\";\nimport AdManager from \"../managers/AdManager\";\n\n\nconst   cardIndex = {\n     GROUP_3_4 : 0,\n     GROUP_4_4 : 1,\n     GROUP_4_5 : 2,\n     GROUP_4_6 : 3,\n     GROUP_4_7 : 4\n}\n\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class GamePlay extends cc.Component {\n\n    private _cards = [];\n    private _gridInfo = null;\n    private _level  =  0;\n    private _timer = null;\n    private OpenCards =[];\n    private cardsInPair =[];\n    private tutorialCards =[];\n    private tutCardName = 0;\n    private isTutoiral = true; \n    private levelData = null;\n    private interval = null;\n    private isTouchBlocked = false;\n    private totalTime = 0;\n    private groupOf = 2;\n    private progresser = null;\n    gameMode = '';\n    gameStartAlert = null;\n    gameEndAlert = null;\n    optionLayer = null;\n    gameTutorials = null;\n\n    bounsPoints = 0;\n    isSoundPlaying = false\n    \n\n    @property(cc.Prefab)\n    cardPrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    options: cc.Prefab = null;\n\n    @property(cc.ProgressBar)\n    timerBar : cc.ProgressBar = null;\n\n    @property(cc.Layout)\n    gameLayout : cc.Layout = null;\n\n    @property(cc.Sprite)\n    bouns = null;\n\n    @property(cc.Prefab)\n    startPopUp = null;\n\n    @property(cc.Prefab)\n    gameEndPopUp = null;\n\n    @property(cc.Node)\n    containerNode = null;\n\n    @property(cc.AudioClip)\n    correctAnswerAudio: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    wrongAnswerAudiodFlip: cc.AudioClip = null;\n    @property(cc.AudioClip)\n    last5Sec: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    clapping: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    timesUp: cc.AudioClip = null;\n\n    @property([cc.SpriteFrame])\n    cardsSpriteFrames: cc.SpriteFrame[] = [];\n\n    @property(cc.Node)\n    hand: cc.Node = null;\n\n    @property(cc.Node)\n    netError: cc.Node = null;\n\n\n    @property(cc.Label)\n    levelLabel: cc.Label = null;\n\n\n    @property(cc.Node)\n    gameInstructions: cc.Node = null;\n\n    @property(cc.Prefab)\n    tutorials: cc.Prefab = null;\n\n    // LIFE-CYCLE CALLBACKS:\n\n     onLoad () {\n\n     }\n\n    start () {\n        this.hand.zIndex = 20;\n        this.netError.zIndex = 20;\n        this.progresser = this.timerBar.node.getChildByName(\"bar\");\n        var animationClips = this.bouns.node.getComponent(cc.Animation);\n        animationClips.on('finished', this.bounsAnimationCompleted, this);\n        this.setOptions();\n        this.progresser.width = 0;\n        this.timerBar.progress = 0;\n        this.timerBar.totalLength = this.timerBar.node.width;\n\n    }\n    onDisable(){\n        if( !this.node.parent.getComponent(\"home\").isforSetting){\n            clearInterval(this.interval)  ;\n            this.OpenCards.length = 0;\n            this.cardsInPair.length = 0;\n            this.hand.parent = this.node;\n            this.bouns.node.active = false; \n            this.tutorialCards.length = 0;\n            this.hand.active = false;\n            this.isTutoiral = true;\n            SoundManager.getInstance().stopAllSounds();\n            this.optionLayer.getComponent(\"options\").disableClockButton();\n        }else{\n            SoundManager.getInstance().stopAllSounds(); \n        }\n    }\n    onEnable(){\n        if(this.optionLayer){\n            this.optionLayer\n            .getComponent(\"options\").updateHindText();\n        }\n        \n    }\n    setOptions() {\n        this.optionLayer = cc.instantiate(this.options);\n        this.optionLayer\n        .getComponent(\"options\").setDelegate(this);\n        this.optionLayer\n        this.node.addChild(this.optionLayer);\n        this.optionLayer.zIndex = 5;\n      }\n\n    // SETTING UP UI\n    setUpUI(level : number, gameMode:string){\n        this.gameLayout.node.active = false;\n        this.gameMode = gameMode;\n        this._level = level;\n        this.levelData = GameManager.getInstance().getLevelData(this._level , this.gameMode);\n        this.setUpAlerts();\n        this.loadLevelImages();\n        \n       \n        \n    }\n     loadLevelImages(){\n        GameManager.getInstance()\n        .loadLevelImages(this._level)\n        .then((data) => {\n          this.groupOf =  this.levelData.groupOf;\n          this.createAndShuffelCards();\n          this._gridInfo = this.levelData.grid;\n          this.setGrid();\n          \n          \n        })\n        .catch((error) => {\n        });\n     }\n    setUpAlerts (){\n        this.gameStartAlert = cc.instantiate(this.startPopUp);\n        let timerTitle = `${this.levelData.timer.totalTime}s`;\n        let levelInfo = GameManager.getInstance().getLevelData(this._level);\n        this.gameStartAlert.getComponent(\"gameStart\").setProperties(this, levelInfo.gameType, levelInfo.groupOf);\n        this.gameEndAlert = cc.instantiate(this.gameEndPopUp);\n        this.gameEndAlert.getComponent(\"gameEnd\").setProperties(this, this.gameMode);\n        this.node.parent.addChild(this.gameStartAlert,7);\n        this.node.parent.addChild(this.gameEndAlert,7);\n        this.gameEndAlert.active = false;\n        this.gameStartAlert.active = false;\n    }\n    setGrid() {\n        console.log(\"inside set card elements\");\n        this.gameLayout.getComponent(cc.Widget).updateAlignment();\n        this.containerNode.getComponent(cc.Widget).updateAlignment();\n        this.gameLayout.node.removeAllChildren();\n        let index = cardIndex[`GROUP_${this._gridInfo.col}_${this._gridInfo.row}`];\n        let totalHeight = (this.containerNode.height - (this.gameLayout.spacingX*this._gridInfo.row));\n        let spacing = this.gameLayout.spacingX * this._gridInfo.col;\n        let width = this.containerNode.width - spacing;\n        let scale = 1;\n        let dummyWidth = 1;\n        for(let i = 0; i < this._cards.length; i++){\n            let card = cc.instantiate(this.cardPrefab);\n            card.getComponent(\"cards\").setDelegate(this);\n            card.getComponent(\"cards\").setUpUI(this._cards[i].name, this._level, this.gameMode, this.cardsSpriteFrames[index]);\n            let blockSize = width / this._gridInfo.col;\n            let height = totalHeight/ this._gridInfo.row;\n            card.setScale(Math.min(blockSize/card.width, height/card.height));\n            scale = card.scale;\n            dummyWidth = card.width;\n            this.gameLayout.node.addChild(card);\n        }  \n        this.gameLayout.node.width =   this._gridInfo.col * (scale * dummyWidth ) + spacing;\n        this.optionLayer.active = false;   \n        this.gameLayout.node.active = true;\n        this.levelLabel.node.parent.active = true; \n        console.log(\"inisde this we have set the cards\");\n        this.updateGamePlay();\n\n    }\n\n    updateGamePlay(){\n        this.levelLabel.getComponent(\"localiser\").replaceValue(`${this._level+1}`); \n          this.levelLabel.getComponent(\"localiser\").setStringForKey();\n          this.levelLabel.node.parent.runAction(cc.sequence(cc.scaleTo(1.5, 1), cc.delayTime(0.5), cc.callFunc(()=>{\n              this.levelLabel.node.parent.active = false;\n              this.levelLabel.node.parent.scale = 0.5;\n            if((this._level+1) % 10 == 1){\n                this.showTutorials();\n            }else{\n                this.startGame();\n            }   \n          })));\n          this.totalTime = this.levelData.timer.totalTime;\n          this.bouns.node.getChildByName(\"bonus\").string = this.levelData.timer.bounsTime;\n    }\n    createAndShuffelCards(){\n        this._cards.length =0;\n        for(let i =0; i < this.groupOf; i++){\n            this._cards.push(...this.levelData.cards);\n        }\n        for(let index = this._cards.length-1; index>= 0; index--){\n            let randomIndex = Math.floor(Math.random() * (index - 0) + 0);\n            let swapElement = this._cards[randomIndex];\n            let currentElement = this._cards[index];\n            this._cards[index] = swapElement;\n            this._cards[randomIndex] = currentElement;\n        }\n\n        if((this._level +1)% 10 == 1){\n           this.tutCardName = this._cards[Math.floor(Math.random() * (this._cards.length - 1) + 0)].name;\n          \n        }\n\n\n\n    }\n    flipAllCards(){\n        for(let child of this.gameLayout.node.children){\n            child.getComponent(\"cards\").unreveal();\n            if((this._level+1) % 10 != 1){\n              child.getComponent('cards').disableOverlay();\n            }\n        }\n        if((this._level+1) % 10 == 1){\n            this.tutorialCards = this.gameLayout.node.children.filter(item =>  item.getComponent('cards').getCardName() == this.tutCardName); \n            this.isTutoiral = true;\n            this.moveTutHand();\n            \n        }else{\n            this.isTutoiral = false;\n        }\n       \n    }\n    moveTutHand(){\n        console.log(\"move tut hand\");\n        let card = this.tutorialCards.shift();\n        if(!card) return;\n        card.parent.getComponent(cc.Widget).updateAlignment();\n        card.getComponent('cards').disableOverlay();\n        this.hand.active = true;\n        let worldSpace = this.containerNode.convertToWorldSpace(card.getPosition());\n        let nodeSpace = this.hand.parent.convertToNodeSpace(worldSpace);\n        this.hand.y = nodeSpace.y - (card.height  * card.scale);\n        this.hand.x = nodeSpace.x;\n        this.hand.stopAllActions();\n        this.hand.runAction(cc.sequence(cc.moveBy(.5,  0 , 50), cc.moveBy(.5, 0, -50)).repeat(1000));\n    }\n    moveTudHandsOnHints(isOnMagnifineGlass){\n        this.hand.parent = this.gameTutorials;\n        let position = this.optionLayer.getComponent(\"options\").getChildrenPosition(isOnMagnifineGlass);\n        let worldSpace = this.optionLayer.parent.convertToWorldSpaceAR(position);\n        let nodeSpace = this.gameTutorials.convertToNodeSpaceAR(worldSpace);\n        this.hand.y = nodeSpace.y + this.node.height * 0.3;\n        this.hand.x = nodeSpace.x;\n    }\n    startGameTimer (){\n        let target = this;\n        target.optionLayer.getComponent(\"options\").updateTimer(0 , this.totalTime)\n        this.interval = setInterval(()=>{\n            this._timer++;\n\n            target.optionLayer.getComponent(\"options\").updateTimer(this._timer , this.totalTime)\n\n            // console.log(\"inside this maximum time inside this\", this.totalTime);\n            if(this.gameMode != GAME_MODE.PRACTICE){\n                this.timerBar.progress  = this._timer  / this.totalTime;\n\n                if(Math.abs(this._timer  - this.totalTime) == 10 || \n                     (!this.isSoundPlaying && Math.abs(this._timer  - this.totalTime) < 10)){\n                    SoundManager.getInstance().playEffect(this.last5Sec, false);\n                    this.isSoundPlaying = true;\n                    this.optionLayer.getComponent(\"options\").enableClockButton();\n                    console.log(\"inside thie we are here hhheheheh\");\n                    this.showTenSecondsPopUp();\n                }else if(this.isSoundPlaying && Math.abs(this._timer  - this.totalTime) > 10){\n                    SoundManager.getInstance().stopAllSounds();\n                    this.optionLayer.getComponent(\"options\").disableClockButton();\n                    this.isSoundPlaying = false;\n                }\n                if(this._timer  == this.totalTime){\n                    this.isTouchBlocked = true;\n                    clearInterval(this.interval);  \n                    this.endGame(false);\n                }\n            }\n            \n        }, 1000);\n    }\n    showCard(card){\n        if(this.cardsInPair.length >= this.groupOf || this.isTouchBlocked){\n            return;\n        }\n        card.getComponent(\"cards\").reveal();\n        this.cardsInPair.push(card);\n        this.isTutoiral && this.moveTutHand();\n        this.cardsInPair.length > 1 && this.isPair();\n       \n       \n        // this.isTutoiral \n    }\n    isPair(){\n        let cards = [];\n        cards.length = 0;\n        for(let i=0; i< this.cardsInPair.length; i++){\n            cards.push(this.cardsInPair[i].getComponent('cards'))\n        }\n\n        let isMatch  = true;\n        for(let i = 0; i < cards.length - 1; i++ ){\n            if(cards[i].getCardName() !== cards[i+1].getCardName()){\n                isMatch = false;\n                break;\n            }\n\n        } \n        if( isMatch ){   \n            if(this.cardsInPair.length != this.groupOf){\n                return\n            }\n        \n            this.playBounsAnimation();\n            this.isTouchBlocked = true;\n            this.node.runAction(cc.sequence(cc.delayTime(0.2), cc.callFunc(()=>{\n            for(let cardScipt of cards){\n                    cardScipt.playCorrectAnimation();\n            }\n            this.isTouchBlocked = false;\n            })));\n            for(let cardScipt of cards){\n                this.OpenCards.push(cardScipt.getCardName());\n               }\n            this.cardsInPair.length = 0;\n            if(this.OpenCards.length == this._cards.length){\n               this.node.runAction(cc.sequence(cc.delayTime(1), cc.callFunc(()=>{\n                this.endGame(true);\n               }))); \n            }\n\n            if(this.isTutoiral){\n                this.node.runAction(cc.sequence(cc.delayTime(1), cc.callFunc(()=>{\n                    // this();\n                    this.continueTutorial();\n                   }))); \n                \n            }\n\n        }else{\n            let target = this;\n            this.isTouchBlocked = true;\n            this.node.runAction(cc.sequence(cc.delayTime(1), cc.callFunc(()=>{\n                for(let cardScipt of cards){\n                    cardScipt.unreveal();\n                    this.isTouchBlocked = false;\n                }\n                this.cardsInPair.length = 0;\n            })));\n          \n        }\n        this.node.runAction(cc.sequence(cc.delayTime(0.3), cc.callFunc( ()=>{\n            let clip = isMatch ? this.correctAnswerAudio : this.wrongAnswerAudiodFlip;\n            SoundManager.getInstance().playEffect(clip, false);\n        })));\n    }\n    endGame (isWon) {\n\n        this.optionLayer.getComponent(\"options\").disableClockButton();\n         SoundManager.getInstance().stopAllSounds();\n         clearInterval(this.interval);\n        if(isWon){\n            let isNewRecord = false;\n            let levelInfo = JSON.parse(cc.sys.localStorage.getItem(\"LevelInfo\"));\n            let levels =  JSON.parse(levelInfo.level);\n            // SoundManager.getInstance().playEffect(this.clapping, false);\n            if(levels[this._level].time > this._timer){\n                levels[this._level].time = this._timer;\n                if(this._level < levels.length-1){\n                    levels[this._level+1].isUnlock = true;\n                }\n                levelInfo.level = JSON.stringify(levels);\n                cc.sys.localStorage.setItem(\"LevelInfo\", JSON.stringify(levelInfo));\n                isNewRecord = true;\n            }\n            this.gameEndAlert.getComponent(\"gameEnd\").showPopUpFor(isNewRecord ? END_POP_UP.NEW_RECORD: END_POP_UP.CLEARD, this._level);\n            this.gameEndAlert.active = true;\n        }else{\n            // SoundManager.getInstance().playEffect(this.timesUp, false);\n            this.gameEndAlert.getComponent(\"gameEnd\").showPopUpFor(END_POP_UP.FAILED,this._level);\n            this.gameEndAlert.active = true;\n        }\n\n        this.node.runAction(cc.sequence(cc.delayTime(0.5), cc.callFunc( ()=>{\n            let clip = isWon ? this.clapping : this.timesUp;\n            SoundManager.getInstance().playEffect(clip, false);\n        })));\n        \n    }\n\n    // pop ups DELEGATE METHODS \n    onPlayAgain (){\n        this.gameEndAlert.active = false;\n        if(!cc.sys.isBrowser){\n            if(AdManager.getInstance().isAdAvailable()){\n                AdManager.getInstance().showInterstital(this);\n            };\n        }\n        cc.sys.localStorage.setItem(\"lastPlayedLevel\", this._level);\n        //MARK : TO DO CHECK WORK AFTER ADS COMES\n        this.node.parent.getComponent(\"home\").onBack();\n        this.node.parent.getComponent(\"home\").startGame();\n    }\n\n    startGame(){\n        console.log(\"inside this\");\n        this.levelLabel.node.parent.active= false;\n        this.progresser.width = this.timerBar.node.width;   \n        this.timerBar.progress = 1;\n        let target = this;\n        let time = this.levelData.timer.memorizeTime;\n        target.optionLayer.getComponent(\"options\").updateTimer(time, this.levelData.timer.totalTime)\n        target.optionLayer.active = true;\n        \n        this.isTouchBlocked = true;\n        this.interval = setInterval(()=>{\n            target.optionLayer.getComponent(\"options\").updateTimer(time, this.levelData.timer.totalTime)\n            time--;\n            this.timerBar.progress = time/this.levelData.timer.memorizeTime;\n            if(time === -1){\n                clearInterval(this.interval);\n                target.isTouchBlocked = false;\n                target.flipAllCards();\n                if(!this.isTutoiral){\n                    this._timer = 0;\n                    this.startGameTimer();\n\n                }\n                \n            }\n        }, 1000);\n    }\n\n    onPlayAgainCancel(){\n        this.gameEndAlert.active = false;\n        this.gameEndAlert.removeFromParent();\n        this.node.parent.getComponent(\"home\").onBack();\n\n    }\n\n    gameEnded (){\n        this.gameEndAlert.removeFromParent();\n        let level = GameManager.getInstance().getCurrentLevel();\n        let totalLevelInMode = GameManager.getInstance().getLevelInfo(this.gameMode);\n        if(level == totalLevelInMode.length -1){\n          this.node.parent.getComponent(\"home\").showFutureDetailsScreen();\n          GameManager.getInstance().pushScene(GAME_SCREEN.FUTURE_ANNOCMENTS);    \n        }else{\n            cc.sys.localStorage.setItem(\"lastPlayedLevel\", this._level + 1);\n            this.node.parent.getComponent(\"home\").onBack();\n            this.node.parent.getComponent(\"home\").startGame();\n        }\n       \n    }\n\n    // ANIMATION CALLBACKS :\n    playBounsAnimation(isFromPowerUp = false){\n        console.log(\"is from popwe up \", isFromPowerUp);\n        let additonPoints = isFromPowerUp ? 10 : 5;\n        this.bounsPoints += additonPoints;\n        this.bouns.node.active = true;\n        this.bouns.node.position  = new cc.Vec2(0,0);\n        this.bouns.node.scale = 2;\n        this.bouns.node.getComponentInChildren(cc.Label).string = `+${additonPoints}`;\n        this.bouns.node.opacity = 255;\n        this.bouns.node.getComponent(cc.Animation).play();\n\n    }\n    bounsAnimationCompleted (){\n        this.bouns.node.active = false;\n        this.totalTime += this.bounsPoints//this.levelData.timer.bounsTime;\n        this.optionLayer.getComponent(\"options\").updateTimer(this._timer,  this.totalTime);\n        this.isTouchBlocked = false;\n        this.bounsPoints = 0;\n    }\n    showTutorials(){\n        this.gameTutorials = cc.instantiate(this.tutorials);\n        this.gameTutorials.getComponent(\"tutorials\").setDelegate(this);\n        this.gameTutorials.getComponent(\"tutorials\").showMemoriseTime(this.levelData.timer.memorizeTime);\n        this.hand.setPosition(0,0);\n        this.node.parent.addChild(this.gameTutorials, 100);\n        \n    }\n    continueTutorial(){\n        this.gameTutorials.active = true;\n        this.gameTutorials.getComponent(\"tutorials\").moveToNextSlide();\n        \n    }\n    showGameInstructionPopUp(){\n        console.log(\"inside this we have to see the \");\n        this.gameStartAlert.active = true;\n        this.hand.active = false;\n    }\n    stopTutorials(){\n        this.isTutoiral = false;\n        this.tutorialCards.length = 0;\n        this.gameStartAlert.removeFromParent();\n        for(let child of this.gameLayout.node.children){\n              child.getComponent('cards').disableOverlay();\n         }\n         this._timer = 0;\n         this.startGameTimer();\n    } \n    adHasbeenShown(){\n\n    }\n    isTutorialPlaying(){\n       return this.isTutoiral;\n    }\n    removeHintPopUp(){\n       this.gameEndAlert.active = false;\n       this.startGameTimer();\n       this.optionLayer.getComponent('options').updateHindText();\n    }\n    showHintPopUP(type){\n       console.log(\"cc.sys.getNetworkType()\", cc.sys.getNetworkType(),  cc.sys.NetworkType.LAN, cc.sys.NetworkType.WWAN)\n    if (cc.sys.getNetworkType() == cc.sys.NetworkType.LAN || cc.sys.getNetworkType() == cc.sys.NetworkType.WWAN){\n        this.gameEndAlert.getComponent(\"gameEnd\").showPopUpFor(type, this._level);\n        this.gameEndAlert.active = true;\n        clearInterval(this.interval);\n    }else{\n        console.log(\"show error pop up\",this.netError);\n        this.showNetErroPopUP();\n    }\n      \n    }\n    showNetErroPopUP(){\n\n       this.netError.active = true;\n\n       this.netError.getComponentInChildren(cc.Label).string = GameManager.getInstance().getString('openNet');\n       cc.tween(this.netError)\n       .delay(2)\n       .call(()=> this.netError.active = false)\n       .start();\n    }\n    openPairCards(){\n\n    let hiddenCards  = [];\n    let targetCard = null;\n\n    \n    if(this.cardsInPair.length == this.groupOf || this.isTouchBlocked){\n        console.log(\"please. return\");\n        return;\n    }\n    else if(this.cardsInPair.length!=0 && this.cardsInPair.length <= this.groupOf){\n        hiddenCards = this.cardsInPair;\n    }else{\n        // console.log(\"innside else\");\n          hiddenCards =  this.gameLayout.node.children.filter(item =>  !item.getComponent('cards').isOpen());  \n    }\n\n\n    // console.log(\"hidden cards hehhehe\", hiddenCards, this.cardsInPair);\n    if(hiddenCards.length > 0){\n      let card = hiddenCards[0];\n      let pairs =  this.gameLayout.node.children.filter(item => \n      item.getComponent('cards').getCardName() ==  card.getComponent('cards').getCardName() ); \n    //   console.log(\"pairs\", pairs, card.getComponent('cards').getCardName());\n      pairs.forEach(card=>{\n          if(!card.getComponent('cards').isOpen()){\n            this.showCard(card)\n        }\n    });\n        \n       \n     }\n            \n       \n     \n    }\n    showTenSecondsPopUp(){\n       console.log(\"inside this we have to show ten seconds timer here hehe\", JSON.parse(cc.sys.localStorage.getItem(\"lastTenSeconds\")));\n       if(!JSON.parse(cc.sys.localStorage.getItem(\"lastTenSeconds\"))){\n        cc.sys.localStorage.setItem(\"lastTenSeconds\", true);\n        clearInterval(this.interval);\n        this.node.parent.getComponent(\"home\").showLastSecondsPopUp();\n    }\n    }\n\n   hideTenSecondsPopUp(){\n    this.node.parent.getComponent(\"home\").hideLastSecondsPopUp();\n    this.startGameTimer();\n   }\n\n\n\n    \n\n\n\n    \n\n\n\n\n\n\n\n   \n\n}\n"]}