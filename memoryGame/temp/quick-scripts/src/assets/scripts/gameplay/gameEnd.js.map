{"version":3,"sources":["assets/scripts/gameplay/gameEnd.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GAME_MODE, END_POP_UP } from \"../helper/constants\";\nimport { GameManager } from \"../managers/GameManager\";\nimport SoundManager from \"../managers/SoundManager\";\nimport AdManager from \"../managers/AdManager\";\n// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class GameEnd extends cc.Component {\n\n    showingAdFromGp =false;\n\n    private _delegate = null;\n    @property(cc.Label)\n    remarks: cc.Label = null;\n\n\n    @property(cc.Label)\n    comments : cc.Label = null;\n\n\n    @property(cc.Node)\n    newRecord : cc.Node = null;\n\n    @property(cc.Node)\n    timesUp : cc.Node = null;\n\n    @property(cc.Node)\n    hintLayer : cc.Node = null;\n\n    @property(cc.Button)\n    adButtons : cc.Button = null;\n\n    @property(cc.Button)\n    wantHint : cc.Button = null;\n\n\n    @property(cc.AudioClip)\n    buttonPressed : cc.AudioClip = null;\n\n\n\n    @property(cc.Label)\n    powerUpTitle: cc.Label = null;\n\n    @property(cc.Label)\n    powerUpCover: cc.Label = null;\n\n\n\n    isForClue :boolean =  false;\n    start () {\n\n    }\n\n    setProperties(delegate, gameMode ){\n        this._delegate = delegate;\n        // this.mode = gameMode.toUpper();\n    }\n\n\n\n    onAccept(){\n        SoundManager.getInstance().playEffect(this.buttonPressed, false);\n        this._delegate.gameEnded();\n\n    }\n\n    onPlayAgain (){\n        SoundManager.getInstance().playEffect(this.buttonPressed, false);\n        this._delegate.onPlayAgain();\n    }\n\n    onCancel(){\n        SoundManager.getInstance().playEffect(this.buttonPressed, false);\n        this._delegate.onPlayAgainCancel();\n    }\n\n    showPopUpFor(type : END_POP_UP, level){\n        \n        this.newRecord.active = false;\n        this.timesUp.active = false;\n        this.hintLayer.active = false;\n        this.remarks.string = GameManager.getInstance().getString('newRecord');\n        // console.log(\"is ad present\", AdManager.getInstance().isAdAvailable());\n        switch(type){\n            case END_POP_UP.CLEARD: \n                 this.remarks.string = GameManager.getInstance().getString('congratulations');\n            case END_POP_UP.NEW_RECORD:\n                this.adButtons.interactable = AdManager.getInstance().isAdAvailable();\n                this.newRecord.active = true;\n                break;         \n            case END_POP_UP.FAILED:\n                 this.timesUp.active = true;\n                 break;\n            case END_POP_UP.FOR_CLUE:\n              this.hintLayer.active = true;\n              this.isForClue = true;\n              this.updatePowerUpTitle()\n              break;    \n              \n            case END_POP_UP.FOR_HIT:\n               this.hintLayer.active = true;\n               this.isForClue = false;\n               this.updatePowerUpTitle();\n                break;      \n            \n        }\n\n    }\n\n\n    showAds(){\n        if(!cc.sys.isBrowser){\n            if(!AdManager.getInstance().showInterstital(this)){\n                this.adHasbeenShown();\n                console.log(\"no ad avilable right now\");\n            };\n        }\n    }\n\n    adHasbeenShown(){\n        if(  this.isForClue){\n            let  clueCount = JSON.parse(cc.sys.localStorage.getItem(\"clue\"));\n            clueCount +=1; // for now will add new once done\n            cc.sys.localStorage.setItem(\"clue\", clueCount);\n        }\n        else{\n            let  hintCount = JSON.parse(cc.sys.localStorage.getItem(\"hint\"));\n            console.log(\"hint count before\", hintCount);\n            hintCount +=3; // for now will add new once done\n            console.log(\"hint count after\", hintCount);\n            cc.sys.localStorage.setItem(\"hint\", hintCount);\n        }\n    \n\n        this.isForClue = false;\n        if( this.showingAdFromGp){\n            console.log(\"remove ads\");\n             this._delegate.removeHintPopUp();\n        }else{\n            // this.adButtons.interactable = false\n        }\n       \n    }\n\n\n    watchAd(){\n        this.showingAdFromGp = true;\n        this.showAds();\n       \n    }\n\n\n    cancelAd(){\n        this._delegate.removeHintPopUp();\n    }\n  \n\n    updatePowerUpTitle(){\n        let key = !this.isForClue? \"noMoreHints\" : \"noMoreClue\" \n        let key2 = !this.isForClue? \"WatchAdsForHint\" : \"WatchAdsForClues\"\n        this.powerUpTitle.string =  GameManager.getInstance().getString(key);\n        this.powerUpCover.string =  GameManager.getInstance().getString(key2);\n\n\n    }\n\n}\n"]}