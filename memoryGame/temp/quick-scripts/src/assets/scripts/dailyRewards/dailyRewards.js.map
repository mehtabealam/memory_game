{"version":3,"sources":["assets/scripts/dailyRewards/dailyRewards.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\nimport {GameManager}  from '../managers/GameManager'\n\nconst {ccclass, property} = cc._decorator;\n\n\n@ccclass\nexport default class DailyRewards extends cc.Component {\n    \n    @property(cc.Label)\n    giftLabel: cc.Label = null;\n\n\n    @property(cc.Label)\n    clue: cc.Label = null;\n\n    @property(cc.Node)\n    wrappedNode: cc.Node = null;\n\n    @property(cc.Node)\n    claimNode: cc.Node = null;\n    delgateScript = null;\n\n\n\n    dailyRewards = [\n        {hints : 3, clue :2},\n        {hints : 5, clue :1},\n        {hints : 4, clue :2},\n        {hints : 3, clue :1},\n        {hints : 4, clue :1},\n        {hints : 1, clue :4},\n        {hints : 4, clue :2},\n        {hints : 1, clue :3},\n        {hints : 3, clue :1},\n        {hints : 2, clue :3},\n      \n\n    ];\n\n    reward = this.dailyRewards[0];\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start () {\n        console.log(\"date\", GameManager.getInstance().getCurrentDate());\n        let date = GameManager.getInstance().getCurrentDate().split(\"-\");\n        if(date.length == 3){\n            let index = parseInt(date[2])%10;\n            this.reward = this.dailyRewards[index]\n            console.log(\"reward is\", this.reward, index);\n            \n        }\n    }\n\n    setDelegate(delegate){\n        this.delgateScript = delegate;\n    }\n\n    onRewardPicked(){\n        this.wrappedNode.active = false;\n        this.claimNode.active = true;\n        this.giftLabel.string = `+ ${this.reward.hints}`;   \n        this.clue.string = `+ ${this.reward.clue}`;   \n    }\n\n    onAccept(){\n        let  hintCount = JSON.parse(cc.sys.localStorage.getItem(\"hint\"));\n        console.log(\"hint count before calucalytion\", hintCount);\n        hintCount += this.reward.hints; // for now will add new once done\n        cc.sys.localStorage.setItem(\"hint\", JSON.stringify(hintCount));\n        console.log(\"hint count after calucalytion\", hintCount);\n        cc.sys.localStorage.setItem(\"rewardClaimDate\", GameManager.getInstance().getCurrentDate());\n        let  clueCount = JSON.parse(cc.sys.localStorage.getItem(\"clue\"));\n        clueCount += this.reward.clue;\n        cc.sys.localStorage.setItem(\"clue\", JSON.stringify(hintCount));\n        this.delgateScript.onRewardCollected()\n        this.node.active = false;\n    }\n    // update (dt) {}\n}\n"]}