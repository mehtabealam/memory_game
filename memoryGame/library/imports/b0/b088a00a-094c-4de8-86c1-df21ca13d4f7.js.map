{"version":3,"sources":["assets/scripts/level/levelUIManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { GameManager } from \"../managers/GameManager\";\nimport { GAME_TYPE } from \"../helper/constants\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class LevelUIManager extends cc.Component {\n\n    _delagate : null;\n    @property(cc.Prefab)\n    levelSelectionButton : cc.Prefab = null;\n\n    @property(cc.SpriteFrame)\n    unlocked : cc.Prefab = null;\n\n    @property(cc.SpriteFrame)\n    locked : cc.Prefab = null;\n\n\n    @property(cc.Layout)\n    layout : cc.Layout = null;\n\n    @property(cc.Label)\n    title : cc.Label = null;\n\n    // onLoad () {}\n\n    start () {\n\n    }\n\n    setDelegateComponent(delgate){\n        this._delagate =  delgate;\n    }\n\n\n    populateLevels(startIndex){\n        let levelInfo = GameManager.getInstance().getLevelData(startIndex);\n        this.setLeveltitle(levelInfo.gameType, levelInfo.groupOf)\n        this.layout.node.removeAllChildren();\n        let levels = GameManager.getInstance().getLevelInfo();\n        let levelsInfo = JSON.parse(cc.sys.localStorage.getItem(\"LevelInfo\"));\n        let levelsInfoForMode = JSON.parse(levelsInfo.level);\n        let endIndex = (startIndex + 10) > levels.length ? levels.length : (startIndex +10);\n        for (let i = startIndex; i < endIndex; i++) {\n            let button = cc.instantiate(this.levelSelectionButton);\n            button.name = i.toString();\n            button.getChildByName(\"Background\").getChildByName(\"title\")\n            .getComponent(cc.Label).getComponent(\"localiser\").replaceValue(`${i+1}`);\n            let clickEventHandler = new cc.Component.EventHandler();\n            clickEventHandler.target = this.node;\n            clickEventHandler.component = \"levelUIManager\";\n            clickEventHandler.handler = \"onLevelSelect\";\n            clickEventHandler.customEventData = i.toString();\n            button.getComponent(cc.Button).clickEvents.push(clickEventHandler);\n            if(levelsInfoForMode[i].isUnlock){\n                button.getChildByName(\"Background\").getComponent(\"cc.Sprite\").spriteFrame = this.unlocked;\n                button.getChildByName(\"lock\").active = false;\n                button.getComponent(cc.Button).interactable = true;\n            }else{\n                button.getChildByName(\"Background\").getComponent(\"cc.Sprite\").spriteFrame = this.locked;\n                button.getChildByName(\"lock\").active = true;\n                button.getComponent(cc.Button).interactable = false;\n            }\n            this.layout.node.addChild(button);\n       }\n\n       \n\n    }\n\n\n    updateLevels(startIndex){\n        let levelInfo = GameManager.getInstance().getLevelData(startIndex);\n        this.setLeveltitle(levelInfo.gameType, levelInfo.groupOf)\n        let levelsInfo = JSON.parse(cc.sys.localStorage.getItem(\"LevelInfo\"));\n        let levels = GameManager.getInstance().getLevelInfo();\n        let endIndex = (startIndex + 10) > levels.length ? levels.length : (startIndex +10);\n        let levelsInfoForMode = JSON.parse(levelsInfo.level);\n        for (let i = startIndex; i < endIndex; i++) {\n            let button = cc.instantiate(this.levelSelectionButton);\n            if(levelsInfoForMode[i].isUnlock){\n                button.getChildByName(\"Background\").getComponent(\"cc.Sprite\").spriteFrame = this.unlocked;\n                button.getChildByName(\"lock\").active = false;\n                button.getComponent(cc.Button).interactable = true;\n            }else{\n                button.getChildByName(\"Background\").getComponent(\"cc.Sprite\").spriteFrame = this.locked;\n                button.getChildByName(\"lock\").active = true;\n                button.getComponent(cc.Button).interactable = false;\n            }\n            this.layout.node.addChild(button);\n       }\n    }\n\n\n\n    setLeveltitle(gameType, groupof){\n\n        let keyString = \"\";\n\n        switch(gameType){\n            case GAME_TYPE.FIND:\n                keyString = \"find\";\n                break;\n            case GAME_TYPE.MIRROR:\n                keyString = \"mirror\";\n                break;    \n        }\n        this.title.node.getComponent(\"localiser\").key = keyString;\n        console.log('keyString', keyString);\n        this.title.node.getComponent(\"localiser\").replaceValue(`${groupof}`);\n        this.title.node.getComponent(\"localiser\").setStringForKey();\n    }\n\n    onLevelSelect(event: Event, level: string){\n        this._delagate.onLevelSelect(level);\n    }\n\n\n    openLocalisation(){\n        this._delagate.openLocalisationPopUp();\n    }\n\n    // update (dt) {}\n}\n"]}