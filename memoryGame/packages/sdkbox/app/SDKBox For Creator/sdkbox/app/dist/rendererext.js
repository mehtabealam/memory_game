!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=117)}([,,function(t,e){t.exports=require("path")},function(t,e,n){var o,i,r=n(7),s=n(45),a=n(47),l=n(48),c=n(21);"function"==typeof Symbol&&"function"==typeof Symbol.for?(o=Symbol.for("graceful-fs.queue"),i=Symbol.for("graceful-fs.previous")):(o="___graceful-fs.queue",i="___graceful-fs.previous");var u=function(){};if(c.debuglog?u=c.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(u=function(){var t=c.format.apply(c,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),!global[o]){var d=[];Object.defineProperty(global,o,{get:function(){return d}}),r.close=function(t){function e(e,n){return t.call(r,e,(function(t){t||p(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(e,i,{value:t}),e}(r.close),r.closeSync=function(t){function e(e){t.apply(r,arguments),p()}return Object.defineProperty(e,i,{value:t}),e}(r.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){u(global[o]),n(25).equal(global[o].length,0)}))}function f(t){s(t),t.gracefulify=f,t.createReadStream=function(e,n){return new t.ReadStream(e,n)},t.createWriteStream=function(e,n){return new t.WriteStream(e,n)};var e=t.readFile;t.readFile=function(t,n,o){"function"==typeof n&&(o=n,n=null);return function t(n,o,i){return e(n,o,(function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof i&&i.apply(this,arguments),p()):h([t,[n,o,i]])}))}(t,n,o)};var n=t.writeFile;t.writeFile=function(t,e,o,i){"function"==typeof o&&(i=o,o=null);return function t(e,o,i,r){return n(e,o,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof r&&r.apply(this,arguments),p()):h([t,[e,o,i,r]])}))}(t,e,o,i)};var o=t.appendFile;o&&(t.appendFile=function(t,e,n,i){"function"==typeof n&&(i=n,n=null);return function t(e,n,i,r){return o(e,n,i,(function(o){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?("function"==typeof r&&r.apply(this,arguments),p()):h([t,[e,n,i,r]])}))}(t,e,n,i)});var i=t.readdir;function r(e){return i.apply(t,e)}if(t.readdir=function(t,e,n){var o=[t];"function"!=typeof e?o.push(e):n=e;return o.push((function(t,e){e&&e.sort&&e.sort();!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof n&&n.apply(this,arguments),p()):h([r,[o]])})),r(o)},"v0.8"===process.version.substr(0,4)){var l=a(t);d=l.ReadStream,m=l.WriteStream}var c=t.ReadStream;c&&(d.prototype=Object.create(c.prototype),d.prototype.open=function(){var t=this;g(t.path,t.flags,t.mode,(function(e,n){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n),t.read())}))});var u=t.WriteStream;function d(t,e){return this instanceof d?(c.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}function m(t,e){return this instanceof m?(u.apply(this,arguments),this):m.apply(Object.create(m.prototype),arguments)}u&&(m.prototype=Object.create(u.prototype),m.prototype.open=function(){var t=this;g(t.path,t.flags,t.mode,(function(e,n){e?(t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n))}))}),Object.defineProperty(t,"ReadStream",{get:function(){return d},set:function(t){d=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return m},set:function(t){m=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FileReadStream",{get:function(){return d},set:function(t){d=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FileWriteStream",{get:function(){return m},set:function(t){m=t},enumerable:!0,configurable:!0});var y=t.open;function g(t,e,n,o){return"function"==typeof n&&(o=n,n=null),function t(e,n,o,i){return y(e,n,o,(function(r,s){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof i&&i.apply(this,arguments),p()):h([t,[e,n,o,i]])}))}(t,e,n,o)}return t.open=g,t}function h(t){u("ENQUEUE",t[0].name,t[1]),global[o].push(t)}function p(){var t=global[o].shift();t&&(u("RETRY",t[0].name,t[1]),t[0].apply(null,t[1]))}t.exports=f(l(r)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!r.__patched&&(t.exports=f(r),r.__patched=!0)},function(t,e,n){"use strict";e.fromCallback=function(t){return Object.defineProperty((function(){if("function"!=typeof arguments[arguments.length-1])return new Promise((e,n)=>{arguments[arguments.length]=(t,o)=>{if(t)return n(t);e(o)},arguments.length++,t.apply(this,arguments)});t.apply(this,arguments)}),"name",{value:t.name})},e.fromPromise=function(t){return Object.defineProperty((function(){const e=arguments[arguments.length-1];if("function"!=typeof e)return t.apply(this,arguments);t.apply(this,arguments).then(t=>e(null,t),e)}),"name",{value:t.name})}},function(t,e,n){"use strict";const o=(0,n(4).fromCallback)(n(50)),i=n(51);t.exports={mkdirs:o,mkdirsSync:i,mkdirp:o,mkdirpSync:i,ensureDir:o,ensureDirSync:i}},,function(t,e){t.exports=require("fs")},function(t,e,n){"use strict";const o=n(4).fromPromise,i=n(29);t.exports={pathExists:o((function(t){return i.access(t).then(()=>!0).catch(()=>!1)})),pathExistsSync:i.existsSync}},,function(t,e){t.exports=require("electron")},function(t,e){t.exports=require("os")},,function(t,e){t.exports=require("stream")},function(t,e,n){"use strict";var o=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===i}(t)}(t)};var i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(t,e){return!1!==e.clone&&e.isMergeableObject(t)?c((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function s(t,e,n){return t.concat(e).map((function(t){return r(t,n)}))}function a(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function l(t,e,n){var o={};return n.isMergeableObject(t)&&a(t).forEach((function(e){o[e]=r(t[e],n)})),a(e).forEach((function(i){n.isMergeableObject(e[i])&&t[i]?o[i]=function(t,e){if(!e.customMerge)return c;var n=e.customMerge(t);return"function"==typeof n?n:c}(i,n)(t[i],e[i],n):o[i]=r(e[i],n)})),o}function c(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||s,n.isMergeableObject=n.isMergeableObject||o,n.cloneUnlessOtherwiseSpecified=r;var i=Array.isArray(e);return i===Array.isArray(t)?i?n.arrayMerge(t,e,n):l(t,e,n):r(e,n)}c.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return c(t,n,e)}),{})};var u=c;t.exports=u},,function(t,e,n){"use strict";const o=n(3),i=n(2),r=10,s=5,a=0,l=process.versions.node.split("."),c=Number.parseInt(l[0],10),u=Number.parseInt(l[1],10),d=Number.parseInt(l[2],10);function f(){if(c>r)return!0;if(c===r){if(u>s)return!0;if(u===s&&d>=a)return!0}return!1}function h(t,e){const n=i.resolve(t).split(i.sep).filter(t=>t),o=i.resolve(e).split(i.sep).filter(t=>t);return n.reduce((t,e,n)=>t&&o[n]===e,!0)}function p(t,e,n){return`Cannot ${n} '${t}' to a subdirectory of itself, '${e}'.`}t.exports={checkPaths:function(t,e,n,i){!function(t,e,n){f()?o.stat(t,{bigint:!0},(t,i)=>{if(t)return n(t);o.stat(e,{bigint:!0},(t,e)=>t?"ENOENT"===t.code?n(null,{srcStat:i,destStat:null}):n(t):n(null,{srcStat:i,destStat:e}))}):o.stat(t,(t,i)=>{if(t)return n(t);o.stat(e,(t,e)=>t?"ENOENT"===t.code?n(null,{srcStat:i,destStat:null}):n(t):n(null,{srcStat:i,destStat:e}))})}(t,e,(o,r)=>{if(o)return i(o);const{srcStat:s,destStat:a}=r;return a&&a.ino&&a.dev&&a.ino===s.ino&&a.dev===s.dev?i(new Error("Source and destination must not be the same.")):s.isDirectory()&&h(t,e)?i(new Error(p(t,e,n))):i(null,{srcStat:s,destStat:a})})},checkPathsSync:function(t,e,n){const{srcStat:i,destStat:r}=function(t,e){let n,i;n=f()?o.statSync(t,{bigint:!0}):o.statSync(t);try{i=f()?o.statSync(e,{bigint:!0}):o.statSync(e)}catch(t){if("ENOENT"===t.code)return{srcStat:n,destStat:null};throw t}return{srcStat:n,destStat:i}}(t,e);if(r&&r.ino&&r.dev&&r.ino===i.ino&&r.dev===i.dev)throw new Error("Source and destination must not be the same.");if(i.isDirectory()&&h(t,e))throw new Error(p(t,e,n));return{srcStat:i,destStat:r}},checkParentPaths:function t(e,n,r,s,a){const l=i.resolve(i.dirname(e)),c=i.resolve(i.dirname(r));if(c===l||c===i.parse(c).root)return a();f()?o.stat(c,{bigint:!0},(o,i)=>o?"ENOENT"===o.code?a():a(o):i.ino&&i.dev&&i.ino===n.ino&&i.dev===n.dev?a(new Error(p(e,r,s))):t(e,n,c,s,a)):o.stat(c,(o,i)=>o?"ENOENT"===o.code?a():a(o):i.ino&&i.dev&&i.ino===n.ino&&i.dev===n.dev?a(new Error(p(e,r,s))):t(e,n,c,s,a))},checkParentPathsSync:function t(e,n,r,s){const a=i.resolve(i.dirname(e)),l=i.resolve(i.dirname(r));if(l===a||l===i.parse(l).root)return;let c;try{c=f()?o.statSync(l,{bigint:!0}):o.statSync(l)}catch(t){if("ENOENT"===t.code)return;throw t}if(c.ino&&c.dev&&c.ino===n.ino&&c.dev===n.dev)throw new Error(p(e,r,s));return t(e,n,l,s)},isSrcSubdir:h}},function(t,e,n){"use strict";const o=n(4).fromCallback,i=n(55);t.exports={remove:o(i),removeSync:i.sync}},,,,function(t,e){t.exports=require("util")},function(t,e,n){"use strict";const o=n(4).fromCallback,i=n(63);t.exports={readJson:o(i.readFile),readJsonSync:i.readFileSync,writeJson:o(i.writeFile),writeJsonSync:i.writeFileSync}},function(t,e,n){const o=n(7),i=n(11),r=n(87),s=n(2);t.exports=class t{static arrayUnique(t){for(var e=0;e<t.length;++e)for(var n=e+1;n<t.length;++n)t[e]===t[n]&&t.splice(n--,1);return t}static queryParams(){var t={};if("undefined"==typeof window)return"";for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var o=e[n].split("=");if(void 0===t[o[0]])t[o[0]]=decodeURIComponent(o[1]);else if("string"==typeof t[o[0]]){var i=[t[o[0]],decodeURIComponent(o[1])];t[o[0]]=i}else t[o[0]].push(decodeURIComponent(o[1]))}return t}static isFile(t){let e=null;try{e=o.statSync(t)}catch(t){e=null}return!!e&&e.isFile()}static isDir(t){let e=null;try{e=o.statSync(t)}catch(t){e=null}return!!e&&e.isDirectory()}static exist(t){let e=null;try{e=o.statSync(t)}catch(t){e=null}return!!e}static makedir(t){let e=null;try{e=o.statSync(t)}catch(t){e=null}e&&!e.isDirectory()||r.sync(t)}static copy(e,n){t.makedir(n);const i=s.join(n,s.basename(e));o.createReadStream(e).pipe(o.createWriteStream(i))}static getSdkboxBinPath(){const t=s.join(i.homedir(),".sdkbox","bin","sdkbox");return"win32"==i.platform()?t+".bat":t}static isSdkboxInstalled(){const t=s.join(i.homedir(),".sdkbox","bin","sdkbox");let e=null;try{e=o.statSync(t)}catch(t){e=null}return!!e&&e.isFile()}}},,function(t,e){t.exports=require("assert")},function(t,e){t.exports=require("child_process")},,,function(t,e,n){"use strict";const o=n(4).fromCallback,i=n(3),r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>"function"==typeof i[t]);Object.keys(i).forEach(t=>{"promises"!==t&&(e[t]=i[t])}),r.forEach(t=>{e[t]=o(i[t])}),e.exists=function(t,e){return"function"==typeof e?i.exists(t,e):new Promise(e=>i.exists(t,e))},e.read=function(t,e,n,o,r,s){return"function"==typeof s?i.read(t,e,n,o,r,s):new Promise((s,a)=>{i.read(t,e,n,o,r,(t,e,n)=>{if(t)return a(t);s({bytesRead:e,buffer:n})})})},e.write=function(t,e,...n){return"function"==typeof n[n.length-1]?i.write(t,e,...n):new Promise((o,r)=>{i.write(t,e,...n,(t,e,n)=>{if(t)return r(t);o({bytesWritten:e,buffer:n})})})},"function"==typeof i.realpath.native&&(e.realpath.native=o(i.realpath.native))},function(t,e,n){"use strict";t.exports={copySync:n(49)}},function(t,e,n){"use strict";const o=n(2);function i(t){return(t=o.normalize(o.resolve(t)).split(o.sep)).length>0?t[0]:null}const r=/[<>:"|?*]/;t.exports={getRootPath:i,invalidWin32Path:function(t){const e=i(t);return t=t.replace(e,""),r.test(t)}}},function(t,e,n){"use strict";const o=n(3),i=n(11),r=n(2);t.exports={hasMillisRes:function(t){let e=r.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));e=r.join(i.tmpdir(),e);const n=new Date(1435410243862);o.writeFile(e,"https://github.com/jprichardson/node-fs-extra/pull/141",i=>{if(i)return t(i);o.open(e,"r+",(i,r)=>{if(i)return t(i);o.futimes(r,n,n,n=>{if(n)return t(n);o.close(r,n=>{if(n)return t(n);o.stat(e,(e,n)=>{if(e)return t(e);t(null,n.mtime>1435410243e3)})})})})})},hasMillisResSync:function(){let t=r.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));t=r.join(i.tmpdir(),t);const e=new Date(1435410243862);o.writeFileSync(t,"https://github.com/jprichardson/node-fs-extra/pull/141");const n=o.openSync(t,"r+");return o.futimesSync(n,e,e),o.closeSync(n),o.statSync(t).mtime>1435410243e3},timeRemoveMillis:function(t){if("number"==typeof t)return 1e3*Math.floor(t/1e3);if(t instanceof Date)return new Date(1e3*Math.floor(t.getTime()/1e3));throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")},utimesMillis:function(t,e,n,i){o.open(t,"r+",(t,r)=>{if(t)return i(t);o.futimes(r,e,n,t=>{o.close(r,e=>{i&&i(t||e)})})})},utimesMillisSync:function(t,e,n){const i=o.openSync(t,"r+");return o.futimesSync(i,e,n),o.closeSync(i)}}},function(t,e,n){"use strict";const o=n(4).fromCallback;t.exports={copy:o(n(53))}},function(t,e){t.exports=require("events")},,function(t,n,o){const i=o(2),r=o(37),s=o(38),a=o(23),l=o(43);let c;const u={adcolony:"AD UNITS",admob:"AD UNITS",agecheq:"MORE",amazon:"APP STORES",appnext:"AD UNITS",appodeal:"AD UNITS",apteligent:"ANALYTICS",bee7:"AD UNITS",chartboost:"AD UNITS",facebook:"SOCIAL",flurryanalytics:"ANALYTICS",fyber:"AD UNITS",googleanalytics:"ANALYTICS",gpg:"ESSENTIALS",iap:"ESSENTIALS",inmobi:"AD UNITS",kochava:"ATTRIBUTION",leadbolt:"AD UNITS",onesignal:"PUSH NOTIFICATION",playphone:"APP STORES",review:"ESSENTIALS",sdkboxads:"ESSENTIALS",sdkboxplay:"ESSENTIALS",share:"ESSENTIALS",scientificrevenue:"IAP OPTIMIZATION",tune:"ATTRIBUTION",valuepotion:"IAP OPTIMIZATION",vungle:"AD UNITS",youtube:"MORE"},d={adcolony:"Instant-play™ HD the best user experience, hands down.",agecheq:"Easy compliance with the US and Euro Child Privacy Laws",appodeal:"Maximize your app revenue efficiently with programmatic ad mediation for publishers.",bee7:"Our Native rewarded re-engagement system encourages valuable players to stay in your game.",chartboost:"The largest mobile games-only platform to increase revenue and discover new players.",facebook:"The world's largest social media network.",flurryanalytics:"Adopt the industry standard, for free.",googleanalytics:"Turn insights into action.",iap:"Implement Cross-Platform IAP easily. Support Apple AppStore, Google Play, Amazon AppStore, and Playphone store.",inmobi:"The Discovery Platform for a Mobile-First World.",kochava:"Driving Effective Mobile Ad Spend",leadbolt:"The high-performance mobile advertising platform for user acquisition and app monetization.",review:"More downloads of your app with App store ratings and reviews.",tune:"Making mobile marketing better, for everyone.",valuepotion:"Monetize your full user base and get your values up!",vungle:"Infrastructure for app monetization through video ads.",youtube:"Single API to play YouTube videos on both iOS and Android.",fyber:"Designed with you in mind, Fyber empowers developers to execute smart ad monetization strategies.",playphone:"Your new, must-have game monetization channel in the world’s fastest growing gaming markets.",scientificrevenue:"Pricing without Compromise.",admob:"Monetize your apps intelligently",amazon:"The exclusive appstore on Kindle tablets, but available for other devices, too.",appnext:"Grow Your Mobile Business by Promoting Apps.",sdkboxplay:"Cross platform support for both Apple Game Center and Google Play Services, including Login, Achievement and Leaderboard.",gpg:"The most secure and reliable game services for your mobile games now available on both Android and iOS!",onesignal:"OneSignal is a free high volume Push Notification service.",apteligent:"Build Better Apps Faster: crash reporting and realtime performance data.",sdkboxads:"An easy-to-use package that includes all SDKBOX supported Ad Units.",share:"Grow audience network by publishing social messages to Facebook and Twitter."};t.exports=class t{static getInstance(){return c||(c=new t),c}constructor(){this.manifestJson=null,this.changeServer("production"),this.sdkbox_path=s.getSdkboxBinPath(),this.projects={},this.observerTagPrefix="ObserverTag-",this.observerTagCounter=1,this.projs=null}changeServer(t){let e=null;(e="staging"==t?"http://staging.sdkbox.com/installer/v1/":`${l.getDownloadHost()}installer/v1/`)!=this.serverUrl&&(this.serverUrl=e,this.manifestJson=null)}isStaging(){return-1!=this.serverUrl.indexOf("staging")}getDownloadPath(t,e){if(null==this.manifestJson)return null;t=t.toLowerCase();try{const n=this.manifestJson.packages[t].versions;let o=null;for(let t in n){o=n[t][e],o=$.extend({},o);break}return null==o?null:(o.bundle=this.serverUrl+o.bundle,o)}catch(t){return null}}getDisplayName(t){if(null==this.manifestJson)return null;let e=t;try{e=this.manifestJson.packages[t].display_name}catch(n){e=t}return e}getPluginName(t){if(null==this.manifestJson)return null;const e=Object.keys(this.manifestJson.packages);for(let n in e){const o=e[n];if(this.manifestJson.packages[o].display_name==t)return o}}getInstallerPath(){if(null==this.manifestJson)return null;try{const t=this.manifestJson.packages.SDKBOX.versions;let e=null;for(let n in t){e=t[n],e=$.extend({},e);break}return null==e?null:(e.bundle=this.serverUrl+e.bundle,e)}catch(t){return null}}fetchManifest(t){this.fetchJson(this.serverUrl+"manifest.json",(e,n)=>{this.addCategoryInfo(e),this.addDescptionInfo(e),t(e,n)})}fetchPackage(t,e,n){this.fetchManifest((o,i)=>{if(null==o)return void n(null,"fetch manifest failed");const r=this.getDownloadPath(t,e);this.fetchData(r,n)})}fetchJson(t,e){if(null!=this.manifestJson)return void e(this.manifestJson,null);const n=this;this.fetchUrl(t,t=>{"string"==typeof t?e(null,t):t instanceof Response?t.ok?t.json().then((function(t){n.manifestJson=t,e(n.manifestJson,null)})):e(null,`failed, status: ${t.status}`):e(null,"unknow res type")})}fetchData(t,e){null!=t?this.fetchUrl(t,t=>{"string"==typeof t?e(null,t):t instanceof Response?t.ok?e(t,null):e(null,`failed, status: ${t.status}`):e(null,"unknow res type")}):e(null,"failed, url is null")}fetchUrl(t,e){fetch(t).then((function(t){e(t)}),(function(t){e(t.message)}))}getInstalledPlugins(t,e,n=!1){!n&&t in this.projects&&this.projects[t]?e&&e(this.projects[t],null):this.queryInstalledPlugins(t,e)}queryInstalledPlugins(t,n){if(!a.isFile(i.join(t,".sdkbox_packages.json")))return console.log("project not include sdkbox packages"),this.projects[t]=this.projects[t]||{},void(n&&n(this.projects[t]));let o="sdkbox info "+t,s=r.getInstance();if(s.query(o))return;let l=[this.sdkbox_path,"--alwaysupdate","--local","--jsonapi","info"];const c=this.projs.get(t);let u=c.getSelectXcodeProject();c.isXcodeProjectEnable()&&u&&(l.push("--projectpath"),l.push(u)),u=c.getSelectAndroidProject(),c.isAndroidProjectEnable()&&u&&(l.push("--projectpath"),l.push(u));let d={tag:o,cwd:t};s.exec(l,d,(o,i,r)=>{let s=null,a=null;try{o?a=e.toString():(null!=i&&0!=i.length||(i="{}"),s=JSON.parse(i))}catch(t){a=t.toString()}a||(this.projects[t]=s),n&&n(s,a);for(let e in this._installedPluginsObserver)this._installedPluginsObserver[e]&&this._installedPluginsObserver[e](s,t)})}observeInstalledPlugin(t){this._installedPluginsObserver||(this._installedPluginsObserver={}),this._installedPluginsObserver[`${this.observerTagPrefix}${this.observerTagCounter}`]=t,this.observerTagCounter++}getDependency(t){if(Array.isArray(t)){let e=[];for(let n in t){const o=t[n],i=this.getDependency(o);i&&(e=e.concat(i))}return e}{if(!this.manifestJson)return;const e=t;let n=null;try{n=this.manifestJson.packages[e].dependence}catch(t){console.log(t),n=null}return n&&0==n.length&&(n=null),n}}addCategoryInfo(t){if(t)for(let e in t.packages){let n=t.packages[e];if(n.category)continue;const o=u[e]?u[e]:"MORE";n.category=o}}addDescptionInfo(t){if(t)for(let e in t.packages){let n=t.packages[e];if(n.description)continue;const o=d[e]?d[e]:"SDKBox Plugin:"+e;n.description=o}}getPluginPath(t){if(null==this.manifestJson)return null;t=t.toLowerCase();try{const e=this.manifestJson.packages[t].versions;let n=null;for(let t in e){n=e[t].v3,n=$.extend({},n);break}if(null==n)return null;{let t=n.bundle.slice(0,-7);return s.getSdkboxPluginsPath(t)}}catch(t){return null}}getXcodeProject(t){if(null==this.projs)return null;let e=null;try{e=this.projs.get(t).getSelectXcodeProject()}catch(t){console.log(t)}return e}getProjectByPath(t){if(null==this.projs)return null;let e=null;try{e=this.projs.get(t)}catch(t){console.log(t)}return e}}},function(t,e,n){const o=n(2),i=n(86),r=n(26),s=n(23).queryParams();let a;t.exports=class t{static getInstance(){return a||((a=new t).builtinCocosRoot=s.builtinCocosRoot),a}constructor(){this._process=new Map}exec(t,e,n){this._nextId++;let s=t.shift(),a=e.tag;if(delete e.tag,this.builtinCocosRoot){const t=o.join(this.builtinCocosRoot,"tools","cocos2d-console","bin");e.env={PATH:i.env.PATH,COCOS_CONSOLE_ROOT:t}}let l=r.spawn(s,t,e);console.log(`[CLI] spawn (${l.pid}): ${s} ${t.join(" ")}`);let c=this._process;c.set(a,l);let u=[],d=[];l.stdout.on("data",t=>{u.push(t),"object"==typeof n&&n.stdout(t)}),l.stderr.on("data",t=>{d.push(t),"object"==typeof n&&n.stderr(t)}),l.on("error",t=>{c.has(a)&&c.delete(a),"object"==typeof n?n.error(t,u.join(""),d.join("")):"function"==typeof n&&n(t,u.join(""),d.join(""))}),l.on("exit",(t,e)=>{e=e||"",console.log(`[CLI] exit (${l.pid}) ${t} ${e}`),c.has(a)&&c.delete(a),"object"==typeof n?n.exit(u.join(""),d.join("")):"function"==typeof n&&n(null,u.join(""),d.join(""))})}kill(t){if(this._process.has(t)){let e=this._process[t];e&&e.kill(),this._process.delete(t)}}query(t){return this._process.has(t)}}},function(t,e,n){const o=n(11),i=n(2),r=n(7),s=(n(86),n(10).remote.dialog),a=n(37),l=n(79);function c(t){const e=i.join(o.homedir(),".sdkbox","bin","sdkbox");let n=null;try{n=r.statSync(e)}catch(t){n=null}return!!n&&n.isFile()}e.installIf=function(){c()||function(){let t=a.getInstance(),e="install sdkbox";if(t.query(e))return;const n=l.getInstance();n.open(),n.disableClose(),n.clear(),n.log("Prepare to install SDKBox Installer, please wait...");t.exec(["python","-c","import urllib; s = urllib.urlopen('https://raw.githubusercontent.com/sdkbox-doc/en/master/install/install.py').read(); exec s"],{tag:e},{stdout:t=>{n.log(t.toString())},stderr:t=>{n.log(t.toString())},exit:(t,e)=>{n.enableClose()},error:(t,e,o)=>{n.log(t.toString());n.log("\n\nInstall SDKBox installer failed.\nPlease tell us at (http://www.sdkbox.com/answers/)")}})}()},e.getSdkboxBinPath=function(){const t=i.join(o.homedir(),".sdkbox","bin","sdkbox");if(t)return"win32"==o.platform()?t+".bat":t;s.showErrorBox("SDKBox installer not found","can't found installer at ~/.sdkbox/bin")},e.getSdkboxPluginsPath=function(t){const e=i.join(o.homedir(),".sdkbox","plugins");return t?i.join(e,t):e},e.isInstalled=c},,,,,function(t,e,n){const o=n(11),i=n(2),r=n(7),s=n(44),a=n(71),l=n(72),c=n(78),u=n(14);let d=null,f=null;class h{static checkPython(t){let e=c.getInstance(),n="check python";if(e.query(n))return;const o={tag:n};e.exec(["python","--version"],o,{stdout:t=>{},stderr:t=>{},exit:(e,n)=>{n&&n.includes("Python 2.7")?t("success"):t("failed","Python 2.7 is not installed")},error:(e,n,o)=>{t("failed","Python 2.7 is not installed")}})}static installerInstalled(){const t=i.join(o.homedir(),".sdkbox","bin","sdkbox");let e=null;try{e=r.statSync(t)}catch(t){e=null}return!!e&&e.isFile()}static needUpdate(){const t=i.join(o.homedir(),".sdkbox","creator","data","info.json");try{const e=r.readFileSync(t),n=JSON.parse(e);return n.version.installer.local!=n.version.installer.remote||n.version.gui.local!=n.version.gui.remote}catch(t){return!0}}static loadVersions(){h.loadLocalInstallerVersion(),h.loadLocalGUIVersion(),h.loadRemoteInstallerVersion(),h.loadRemoteGUIVersion()}static loadRemoteVersions(){h.loadRemoteInstallerVersion(),h.loadRemoteGUIVersion()}static loadLocalInstallerVersion(){const t=c.getInstance(),e="sdkbox version";if(t.query(e))return;const n=[h.getInstallerPath(),"--local","--jsonapi","version"],o={tag:e};t.exec(n,o,{stdout:t=>{try{const e={version:{installer:{local:JSON.parse(t).version}}};h.mergeAndSaveVersions(e)}catch(t){console.log("loadLocalInstallerVersion:"+t)}},stderr:t=>{},exit:(t,e)=>{},error:(t,e,n)=>{}})}static loadRemoteInstallerVersion(){const t=`${h.getDownloadHost()}installer/v1/manifest.json`;h.getJson(t,(t,e)=>{if(e)console.log(e);else if(t){const e={version:{installer:{remote:Object.keys(t.packages.SDKBOX.versions)[0]}}};h.mergeAndSaveVersions(e)}})}static loadLocalGUIVersion(){const t=i.join(o.homedir(),".sdkbox","creator","app","package.json");s.readJson(t).then(t=>{const e={version:{gui:{local:t.version}}};h.mergeAndSaveVersions(e)}).catch(t=>{})}static loadRemoteGUIVersion(){const t=`${h.getDownloadHost()}gui/creator/version`;h.getJson(t,(t,e)=>{if(e)console.log(e);else if(t){const e={version:{gui:{remote:t.version}}};h.mergeAndSaveVersions(e)}})}static mergeAndSaveVersions(t,e){let n=i.join(o.homedir(),".sdkbox","creator","data","info.json");e&&(n=e),s.pathExists(n).then(e=>{if(e)s.readJson(n).then(e=>{const o=JSON.stringify(u(e,t));h.saveToFile(n,o)}).catch(t=>{console.error(t)});else{const e=JSON.stringify(t);h.saveToFile(n,e)}}).catch(t=>{console.log(t)})}static installInstaller(t){let e=c.getInstance(),n="install sdkbox";if(e.query(n))return;const o={tag:n};e.exec(["python","-c","import urllib; s = urllib.urlopen('https://raw.githubusercontent.com/sdkbox-doc/en/master/install/install.py').read(); exec s"],o,{stdout:e=>{t("loading")},stderr:t=>{},exit:(e,n)=>{t("success")},error:(e,n,o)=>{t("failed","install SDKBox Installer failed")}})}static installInstallerIf(t){installerInstalled()||installInstaller(t)}static updateInstaller(t){let e=c.getInstance(),n="sdkbox version";if(e.query(n))return;const o=[h.getInstallerPath(),"--alwaysupdate","--nohelp","version"],i={tag:n};e.exec(o,i,{stdout:e=>{t("loading")},stderr:t=>{},exit:(e,n)=>{t("success")},error:(e,n,o)=>{t("failed","update SDKBox Installer failed")}})}static getInstallerPath(){let t=i.join(o.homedir(),".sdkbox","bin","sdkbox");return"win32"==o.platform()&&(t+=".bat"),h.fileExist(t)?t:null}static getSdkboxPluginsPath(t){const e=i.join(o.homedir(),".sdkbox","plugins");return t?i.join(e,t):e}static updateGUIMod(t,e,n){const r=i.join(o.homedir(),".sdkbox","temp",e);h.downloadFile(t,r,(t,e)=>{if(e)n("failed",e);else{const t=i.join(o.homedir(),".sdkbox","temp");let e=null;l.open(r,{lazyEntries:!0,decodeStrings:!1},(function(r,a){r?n("failed",r):(a.readEntry(),a.on("error",(function(t){e=t})),a.on("entry",(function(n){const o=n.fileName.toString("utf8");/\/$/.test(n.fileName)?s.ensureDir(i.join(t,o),t=>{t?e=t:a.readEntry()}):a.openReadStream(n,(function(n,r){n?e=n:(r.on("end",(function(){a.readEntry()})),r.pipe(s.createWriteStream(i.join(t,o))))}))})),a.on("end",(function(){if(e)n("failed",e);else{const e=i.join(o.homedir(),".sdkbox","creator","app");s.move(i.join(t,"sdkbox","app"),e,{overwrite:!0}).then(()=>s.move(i.join(t,"sdkbox","package.json"),i.join(o.homedir(),".sdkbox","creator","app","package.json"),{overwrite:!0})).then(()=>{n("success")}).catch(t=>{n("failed",t.message)})}})))}))}})}static downloadFile(t,e,n,o=1){s.remove(e).then(()=>s.ensureDir(i.dirname(e))).then(()=>{let i=s.createWriteStream(e);i.on("open",()=>{a.get(t,t=>{const{statusCode:r}=t;t.headers["content-type"];302==r&&o<4&&t.headers.location?h.downloadFile(t.headers.location,e,n,o+1):200===r?(t.pipe(i),t.on("end",()=>{i.close(),n(e,null)})):n(null,`status code:${r}`)}).on("error",t=>{console.log(t),r.unlink(e),n(null,t.message)})}),i.on("error",t=>{console.log(t)})}).catch(t=>{n(null,t.message)})}static saveToFile(t,e){const n=i.dirname(t);s.ensureDir(n).then(()=>{r.writeFileSync(t,e)})}static fileExist(t){let e;try{e=r.statSync(t)}catch(t){e=null}return!!e&&e.isFile()}static getJson(t,e){a.get(t,t=>{const{statusCode:n}=t;t.headers["content-type"];if(200!==n)return void e(null,`status code:${n}`);t.setEncoding("utf8");let o="";t.on("data",t=>{o+=t}),t.on("end",()=>{try{const t=JSON.parse(o);e(t,null)}catch(t){e(null,t.message)}})}).on("error",t=>{e(null,t.message)})}static compareVersions(t,e){if(null==t&&null==e)return 0;if(null==t)return-1;if(null==e)return 1;let n=t.replace(/^v/,"").split("."),o=e.replace(/^v/,"").split("."),i=Math.min(n.length,o.length);for(let t=0;t<i;t++){let e=parseInt(n[t]||0,10),i=parseInt(o[t]||0,10);if(e>i)return 1;if(i>e)return-1}if(n.length>i)for(let t=i;t<n.length;t++){if(0!=parseInt(n[t]||0,10))return 1}if(o.length>i)for(let t=i;t<o.length;t++){if(0!=parseInt(o[t]||0,10))return-1}return 0}static readJsonFromFile(t){try{const e=r.readFileSync(t);if(e)return JSON.parse(e)}catch(t){}return null}static writeJsonToFile(t,e){r.writeFileSync(t,JSON.stringify(e,0,4))}static getProjectRoot(){return null==d&&Editor.Project&&Editor.Project.path&&(d=Editor.Project.path),null==d&&Editor.projectInfo&&Editor.projectInfo.path&&(d=Editor.projectInfo.path),d}static getDownloadHost(){if(f)return f;const t="http://download.sdkbox.com/",e="http://sdkbox.anysdk.com/",n=i.join(o.homedir(),".sdkbox","conf","loc.json"),r=s.readJsonSync(n,{throws:!1});return r&&r.countryCode?f="CN"==r.countryCode?e:t:(setTimeout((function(){h.getJson("http://ip-api.com/json/",(o,i)=>{if(i)console.log(i);else if(o){f="CN"==o.countryCode?e:t;const i={countryCode:o.countryCode};h.mergeAndSaveVersions(i,n)}})}),100),t)}}t.exports=h},function(t,e,n){"use strict";t.exports=Object.assign({},n(29),n(30),n(33),n(54),n(56),n(62),n(5),n(66),n(68),n(70),n(8),n(17));const o=n(7);Object.getOwnPropertyDescriptor(o,"promises")&&Object.defineProperty(t.exports,"promises",{get:()=>o.promises})},function(t,e,n){var o=n(46),i=process.cwd,r=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return r||(r=i.call(process)),r};try{process.cwd()}catch(t){}var a=process.chdir;process.chdir=function(t){r=null,a.call(process,t)},t.exports=function(t){o.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(e,n,i){t.open(e,o.O_WRONLY|o.O_SYMLINK,n,(function(e,o){e?i&&i(e):t.fchmod(o,n,(function(e){t.close(o,(function(t){i&&i(e||t)}))}))}))},t.lchmodSync=function(e,n){var i,r=t.openSync(e,o.O_WRONLY|o.O_SYMLINK,n),s=!0;try{i=t.fchmodSync(r,n),s=!1}finally{if(s)try{t.closeSync(r)}catch(t){}else t.closeSync(r)}return i}}(t);t.lutimes||function(t){o.hasOwnProperty("O_SYMLINK")?(t.lutimes=function(e,n,i,r){t.open(e,o.O_SYMLINK,(function(e,o){e?r&&r(e):t.futimes(o,n,i,(function(e){t.close(o,(function(t){r&&r(e||t)}))}))}))},t.lutimesSync=function(e,n,i){var r,s=t.openSync(e,o.O_SYMLINK),a=!0;try{r=t.futimesSync(s,n,i),a=!1}finally{if(a)try{t.closeSync(s)}catch(t){}else t.closeSync(s)}return r}):(t.lutimes=function(t,e,n,o){o&&process.nextTick(o)},t.lutimesSync=function(){})}(t);t.chown=r(t.chown),t.fchown=r(t.fchown),t.lchown=r(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=a(t.chownSync),t.fchownSync=a(t.fchownSync),t.lchownSync=a(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=l(t.stat),t.fstat=l(t.fstat),t.lstat=l(t.lstat),t.statSync=c(t.statSync),t.fstatSync=c(t.fstatSync),t.lstatSync=c(t.lstatSync),t.lchmod||(t.lchmod=function(t,e,n){n&&process.nextTick(n)},t.lchmodSync=function(){});t.lchown||(t.lchown=function(t,e,n,o){o&&process.nextTick(o)},t.lchownSync=function(){});"win32"===s&&(t.rename=(e=t.rename,function(n,o,i){var r=Date.now(),s=0;e(n,o,(function a(l){if(l&&("EACCES"===l.code||"EPERM"===l.code)&&Date.now()-r<6e4)return setTimeout((function(){t.stat(o,(function(t,r){t&&"ENOENT"===t.code?e(n,o,a):i(l)}))}),s),void(s<100&&(s+=10));i&&i(l)}))}));var e;function n(e){return e?function(n,o,i){return e.call(t,n,o,(function(t){u(t)&&(t=null),i&&i.apply(this,arguments)}))}:e}function i(e){return e?function(n,o){try{return e.call(t,n,o)}catch(t){if(!u(t))throw t}}:e}function r(e){return e?function(n,o,i,r){return e.call(t,n,o,i,(function(t){u(t)&&(t=null),r&&r.apply(this,arguments)}))}:e}function a(e){return e?function(n,o,i){try{return e.call(t,n,o,i)}catch(t){if(!u(t))throw t}}:e}function l(e){return e?function(n,o,i){function r(t,e){e&&(e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof o&&(i=o,o=null),o?e.call(t,n,o,r):e.call(t,n,r)}:e}function c(e){return e?function(n,o){var i=o?e.call(t,n,o):e.call(t,n);return i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296),i}:e}function u(t){return!t||("ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}t.read=function(e){function n(n,o,i,r,s,a){var l;if(a&&"function"==typeof a){var c=0;l=function(u,d,f){if(u&&"EAGAIN"===u.code&&c<10)return c++,e.call(t,n,o,i,r,s,l);a.apply(this,arguments)}}return e.call(t,n,o,i,r,s,l)}return n.__proto__=e,n}(t.read),t.readSync=(d=t.readSync,function(e,n,o,i,r){for(var s=0;;)try{return d.call(t,e,n,o,i,r)}catch(t){if("EAGAIN"===t.code&&s<10){s++;continue}throw t}});var d}},function(t,e){t.exports=require("constants")},function(t,e,n){var o=n(13).Stream;t.exports=function(t){return{ReadStream:function e(n,i){if(!(this instanceof e))return new e(n,i);o.call(this);var r=this;this.path=n;this.fd=null;this.readable=!0;this.paused=!1;this.flags="r";this.mode=438;this.bufferSize=65536;i=i||{};var s=Object.keys(i);for(var a=0,l=s.length;a<l;a++){var c=s[a];this[c]=i[c]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){r._read()}));t.open(this.path,this.flags,this.mode,(function(t,e){if(t)return r.emit("error",t),void(r.readable=!1);r.fd=e,r.emit("open",e),r._read()}))},WriteStream:function e(n,i){if(!(this instanceof e))return new e(n,i);o.call(this);this.path=n;this.fd=null;this.writable=!0;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;i=i||{};var r=Object.keys(i);for(var s=0,a=r.length;s<a;s++){var l=r[s];this[l]=i[l]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1;this._queue=[];null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(t,e,n){"use strict";t.exports=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var e={__proto__:t.__proto__};else e=Object.create(null);return Object.getOwnPropertyNames(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}},function(t,e,n){"use strict";const o=n(3),i=n(2),r=n(5).mkdirsSync,s=n(32).utimesMillisSync,a=n(16);function l(t,e,n,r){if(!r.filter||r.filter(e,n))return function(t,e,n,r){const s=(r.dereference?o.statSync:o.lstatSync)(e);if(s.isDirectory())return function(t,e,n,i,r){if(!e)return function(t,e,n,i){return o.mkdirSync(n),u(e,n,i),o.chmodSync(n,t.mode)}(t,n,i,r);if(e&&!e.isDirectory())throw new Error(`Cannot overwrite non-directory '${i}' with directory '${n}'.`);return u(n,i,r)}(s,t,e,n,r);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return function(t,e,n,i,r){return e?function(t,e,n,i){if(i.overwrite)return o.unlinkSync(n),c(t,e,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}(t,n,i,r):c(t,n,i,r)}(s,t,e,n,r);if(s.isSymbolicLink())return function(t,e,n,r){let s=o.readlinkSync(e);r.dereference&&(s=i.resolve(process.cwd(),s));if(t){let t;try{t=o.readlinkSync(n)}catch(t){if("EINVAL"===t.code||"UNKNOWN"===t.code)return o.symlinkSync(s,n);throw t}if(r.dereference&&(t=i.resolve(process.cwd(),t)),a.isSrcSubdir(s,t))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${t}'.`);if(o.statSync(n).isDirectory()&&a.isSrcSubdir(t,s))throw new Error(`Cannot overwrite '${t}' with '${s}'.`);return function(t,e){return o.unlinkSync(e),o.symlinkSync(t,e)}(s,n)}return o.symlinkSync(s,n)}(t,e,n,r)}(t,e,n,r)}function c(t,e,i,r){return"function"==typeof o.copyFileSync?(o.copyFileSync(e,i),o.chmodSync(i,t.mode),r.preserveTimestamps?s(i,t.atime,t.mtime):void 0):function(t,e,i,r){const s=n(52)(65536),a=o.openSync(e,"r"),l=o.openSync(i,"w",t.mode);let c=0;for(;c<t.size;){const t=o.readSync(a,s,0,65536,c);o.writeSync(l,s,0,t),c+=t}r.preserveTimestamps&&o.futimesSync(l,t.atime,t.mtime);o.closeSync(a),o.closeSync(l)}(t,e,i,r)}function u(t,e,n){o.readdirSync(t).forEach(o=>(function(t,e,n,o){const r=i.join(e,t),s=i.join(n,t),{destStat:c}=a.checkPathsSync(r,s,"copy");return l(c,r,s,o)})(o,t,e,n))}t.exports=function(t,e,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:s,destStat:c}=a.checkPathsSync(t,e,"copy");return a.checkParentPathsSync(t,s,e,"copy"),function(t,e,n,s){if(s.filter&&!s.filter(e,n))return;const a=i.dirname(n);o.existsSync(a)||r(a);return l(t,e,n,s)}(c,t,e,n)}},function(t,e,n){"use strict";const o=n(3),i=n(2),r=n(31).invalidWin32Path,s=parseInt("0777",8);t.exports=function t(e,n,a,l){if("function"==typeof n?(a=n,n={}):n&&"object"==typeof n||(n={mode:n}),"win32"===process.platform&&r(e)){const t=new Error(e+" contains invalid WIN32 path characters.");return t.code="EINVAL",a(t)}let c=n.mode;const u=n.fs||o;void 0===c&&(c=s&~process.umask()),l||(l=null),a=a||function(){},e=i.resolve(e),u.mkdir(e,c,o=>{if(!o)return a(null,l=l||e);switch(o.code){case"ENOENT":if(i.dirname(e)===e)return a(o);t(i.dirname(e),n,(o,i)=>{o?a(o,i):t(e,n,a,i)});break;default:u.stat(e,(t,e)=>{t||!e.isDirectory()?a(o,l):a(null,l)})}})}},function(t,e,n){"use strict";const o=n(3),i=n(2),r=n(31).invalidWin32Path,s=parseInt("0777",8);t.exports=function t(e,n,a){n&&"object"==typeof n||(n={mode:n});let l=n.mode;const c=n.fs||o;if("win32"===process.platform&&r(e)){const t=new Error(e+" contains invalid WIN32 path characters.");throw t.code="EINVAL",t}void 0===l&&(l=s&~process.umask()),a||(a=null),e=i.resolve(e);try{c.mkdirSync(e,l),a=a||e}catch(o){if("ENOENT"===o.code){if(i.dirname(e)===e)throw o;a=t(i.dirname(e),n,a),t(e,n,a)}else{let t;try{t=c.statSync(e)}catch(t){throw o}if(!t.isDirectory())throw o}}return a}},function(t,e,n){"use strict";t.exports=function(t){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(t)}catch(e){return new Buffer(t)}return new Buffer(t)}},function(t,e,n){"use strict";const o=n(3),i=n(2),r=n(5).mkdirs,s=n(8).pathExists,a=n(32).utimesMillis,l=n(16);function c(t,e,n,o,a){const l=i.dirname(n);s(l,(i,s)=>i?a(i):s?d(t,e,n,o,a):void r(l,i=>i?a(i):d(t,e,n,o,a)))}function u(t,e,n,o,i,r){Promise.resolve(i.filter(n,o)).then(s=>s?t(e,n,o,i,r):r(),t=>r(t))}function d(t,e,n,o,i){return o.filter?u(f,t,e,n,o,i):f(t,e,n,o,i)}function f(t,e,n,i,r){(i.dereference?o.stat:o.lstat)(e,(s,a)=>s?r(s):a.isDirectory()?function(t,e,n,i,r,s){if(!e)return function(t,e,n,i,r){o.mkdir(n,s=>{if(s)return r(s);m(e,n,i,e=>e?r(e):o.chmod(n,t.mode,r))})}(t,n,i,r,s);if(e&&!e.isDirectory())return s(new Error(`Cannot overwrite non-directory '${i}' with directory '${n}'.`));return m(n,i,r,s)}(a,t,e,n,i,r):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?function(t,e,n,i,r,s){return e?function(t,e,n,i,r){if(!i.overwrite)return i.errorOnExist?r(new Error(`'${n}' already exists`)):r();o.unlink(n,o=>o?r(o):h(t,e,n,i,r))}(t,n,i,r,s):h(t,n,i,r,s)}(a,t,e,n,i,r):a.isSymbolicLink()?g(t,e,n,i,r):void 0)}function h(t,e,n,i,r){return"function"==typeof o.copyFile?o.copyFile(e,n,e=>e?r(e):p(t,n,i,r)):function(t,e,n,i,r){const s=o.createReadStream(e);s.on("error",t=>r(t)).once("open",()=>{const e=o.createWriteStream(n,{mode:t.mode});e.on("error",t=>r(t)).on("open",()=>s.pipe(e)).once("close",()=>p(t,n,i,r))})}(t,e,n,i,r)}function p(t,e,n,i){o.chmod(e,t.mode,o=>o?i(o):n.preserveTimestamps?a(e,t.atime,t.mtime,i):i())}function m(t,e,n,i){o.readdir(t,(o,r)=>o?i(o):y(r,t,e,n,i))}function y(t,e,n,o,r){const s=t.pop();return s?function(t,e,n,o,r,s){const a=i.join(n,e),c=i.join(o,e);l.checkPaths(a,c,"copy",(e,i)=>{if(e)return s(e);const{destStat:l}=i;d(l,a,c,r,e=>e?s(e):y(t,n,o,r,s))})}(t,s,e,n,o,r):r()}function g(t,e,n,r,s){o.readlink(e,(e,a)=>e?s(e):(r.dereference&&(a=i.resolve(process.cwd(),a)),t?void o.readlink(n,(e,c)=>e?"EINVAL"===e.code||"UNKNOWN"===e.code?o.symlink(a,n,s):s(e):(r.dereference&&(c=i.resolve(process.cwd(),c)),l.isSrcSubdir(a,c)?s(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${c}'.`)):t.isDirectory()&&l.isSrcSubdir(c,a)?s(new Error(`Cannot overwrite '${c}' with '${a}'.`)):function(t,e,n){o.unlink(e,i=>i?n(i):o.symlink(t,e,n))}(a,n,s))):o.symlink(a,n,s)))}t.exports=function(t,e,n,o){"function"!=typeof n||o?"function"==typeof n&&(n={filter:n}):(o=n,n={}),o=o||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),l.checkPaths(t,e,"copy",(i,r)=>{if(i)return o(i);const{srcStat:s,destStat:a}=r;l.checkParentPaths(t,s,e,"copy",i=>i?o(i):n.filter?u(c,a,t,e,n,o):c(a,t,e,n,o))})}},function(t,e,n){"use strict";const o=n(4).fromCallback,i=n(3),r=n(2),s=n(5),a=n(17),l=o((function(t,e){e=e||function(){},i.readdir(t,(n,o)=>{if(n)return s.mkdirs(t,e);o=o.map(e=>r.join(t,e)),function t(){const n=o.pop();if(!n)return e();a.remove(n,n=>{if(n)return e(n);t()})}()})}));function c(t){let e;try{e=i.readdirSync(t)}catch(e){return s.mkdirsSync(t)}e.forEach(e=>{e=r.join(t,e),a.removeSync(e)})}t.exports={emptyDirSync:c,emptydirSync:c,emptyDir:l,emptydir:l}},function(t,e,n){"use strict";const o=n(3),i=n(2),r=n(25),s="win32"===process.platform;function a(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(e=>{t[e]=t[e]||o[e],t[e+="Sync"]=t[e]||o[e]}),t.maxBusyTries=t.maxBusyTries||3}function l(t,e,n){let o=0;"function"==typeof e&&(n=e,e={}),r(t,"rimraf: missing path"),r.strictEqual(typeof t,"string","rimraf: path should be a string"),r.strictEqual(typeof n,"function","rimraf: callback function required"),r(e,"rimraf: invalid options argument provided"),r.strictEqual(typeof e,"object","rimraf: options should be object"),a(e),c(t,e,(function i(r){if(r){if(("EBUSY"===r.code||"ENOTEMPTY"===r.code||"EPERM"===r.code)&&o<e.maxBusyTries){return o++,setTimeout(()=>c(t,e,i),100*o)}"ENOENT"===r.code&&(r=null)}n(r)}))}function c(t,e,n){r(t),r(e),r("function"==typeof n),e.lstat(t,(o,i)=>o&&"ENOENT"===o.code?n(null):o&&"EPERM"===o.code&&s?u(t,e,o,n):i&&i.isDirectory()?f(t,e,o,n):void e.unlink(t,o=>{if(o){if("ENOENT"===o.code)return n(null);if("EPERM"===o.code)return s?u(t,e,o,n):f(t,e,o,n);if("EISDIR"===o.code)return f(t,e,o,n)}return n(o)}))}function u(t,e,n,o){r(t),r(e),r("function"==typeof o),n&&r(n instanceof Error),e.chmod(t,438,i=>{i?o("ENOENT"===i.code?null:n):e.stat(t,(i,r)=>{i?o("ENOENT"===i.code?null:n):r.isDirectory()?f(t,e,n,o):e.unlink(t,o)})})}function d(t,e,n){let o;r(t),r(e),n&&r(n instanceof Error);try{e.chmodSync(t,438)}catch(t){if("ENOENT"===t.code)return;throw n}try{o=e.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw n}o.isDirectory()?p(t,e,n):e.unlinkSync(t)}function f(t,e,n,o){r(t),r(e),n&&r(n instanceof Error),r("function"==typeof o),e.rmdir(t,s=>{!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?o(n):o(s):function(t,e,n){r(t),r(e),r("function"==typeof n),e.readdir(t,(o,r)=>{if(o)return n(o);let s,a=r.length;if(0===a)return e.rmdir(t,n);r.forEach(o=>{l(i.join(t,o),e,o=>{if(!s)return o?n(s=o):void(0==--a&&e.rmdir(t,n))})})})}(t,e,o)})}function h(t,e){let n;a(e=e||{}),r(t,"rimraf: missing path"),r.strictEqual(typeof t,"string","rimraf: path should be a string"),r(e,"rimraf: missing options"),r.strictEqual(typeof e,"object","rimraf: options should be object");try{n=e.lstatSync(t)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&s&&d(t,e,n)}try{n&&n.isDirectory()?p(t,e,null):e.unlinkSync(t)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return s?d(t,e,n):p(t,e,n);if("EISDIR"!==n.code)throw n;p(t,e,n)}}function p(t,e,n){r(t),r(e),n&&r(n instanceof Error);try{e.rmdirSync(t)}catch(o){if("ENOTDIR"===o.code)throw n;if("ENOTEMPTY"===o.code||"EEXIST"===o.code||"EPERM"===o.code)!function(t,e){if(r(t),r(e),e.readdirSync(t).forEach(n=>h(i.join(t,n),e)),!s){return e.rmdirSync(t,e)}{const n=Date.now();do{try{return e.rmdirSync(t,e)}catch(t){}}while(Date.now()-n<500)}}(t,e);else if("ENOENT"!==o.code)throw o}}t.exports=l,l.sync=h},function(t,e,n){"use strict";const o=n(57),i=n(58),r=n(59);t.exports={createFile:o.createFile,createFileSync:o.createFileSync,ensureFile:o.createFile,ensureFileSync:o.createFileSync,createLink:i.createLink,createLinkSync:i.createLinkSync,ensureLink:i.createLink,ensureLinkSync:i.createLinkSync,createSymlink:r.createSymlink,createSymlinkSync:r.createSymlinkSync,ensureSymlink:r.createSymlink,ensureSymlinkSync:r.createSymlinkSync}},function(t,e,n){"use strict";const o=n(4).fromCallback,i=n(2),r=n(3),s=n(5),a=n(8).pathExists;t.exports={createFile:o((function(t,e){function n(){r.writeFile(t,"",t=>{if(t)return e(t);e()})}r.stat(t,(o,r)=>{if(!o&&r.isFile())return e();const l=i.dirname(t);a(l,(t,o)=>t?e(t):o?n():void s.mkdirs(l,t=>{if(t)return e(t);n()}))})})),createFileSync:function(t){let e;try{e=r.statSync(t)}catch(t){}if(e&&e.isFile())return;const n=i.dirname(t);r.existsSync(n)||s.mkdirsSync(n),r.writeFileSync(t,"")}}},function(t,e,n){"use strict";const o=n(4).fromCallback,i=n(2),r=n(3),s=n(5),a=n(8).pathExists;t.exports={createLink:o((function(t,e,n){function o(t,e){r.link(t,e,t=>{if(t)return n(t);n(null)})}a(e,(l,c)=>l?n(l):c?n(null):void r.lstat(t,r=>{if(r)return r.message=r.message.replace("lstat","ensureLink"),n(r);const l=i.dirname(e);a(l,(i,r)=>i?n(i):r?o(t,e):void s.mkdirs(l,i=>{if(i)return n(i);o(t,e)}))}))})),createLinkSync:function(t,e){if(r.existsSync(e))return;try{r.lstatSync(t)}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}const n=i.dirname(e);return r.existsSync(n)?r.linkSync(t,e):(s.mkdirsSync(n),r.linkSync(t,e))}}},function(t,e,n){"use strict";const o=n(4).fromCallback,i=n(2),r=n(3),s=n(5),a=s.mkdirs,l=s.mkdirsSync,c=n(60),u=c.symlinkPaths,d=c.symlinkPathsSync,f=n(61),h=f.symlinkType,p=f.symlinkTypeSync,m=n(8).pathExists;t.exports={createSymlink:o((function(t,e,n,o){o="function"==typeof n?n:o,n="function"!=typeof n&&n,m(e,(s,l)=>s?o(s):l?o(null):void u(t,e,(s,l)=>{if(s)return o(s);t=l.toDst,h(l.toCwd,n,(n,s)=>{if(n)return o(n);const l=i.dirname(e);m(l,(n,i)=>n?o(n):i?r.symlink(t,e,s,o):void a(l,n=>{if(n)return o(n);r.symlink(t,e,s,o)}))})}))})),createSymlinkSync:function(t,e,n){if(r.existsSync(e))return;const o=d(t,e);t=o.toDst,n=p(o.toCwd,n);const s=i.dirname(e);return r.existsSync(s)?r.symlinkSync(t,e,n):(l(s),r.symlinkSync(t,e,n))}}},function(t,e,n){"use strict";const o=n(2),i=n(3),r=n(8).pathExists;t.exports={symlinkPaths:function(t,e,n){if(o.isAbsolute(t))return i.lstat(t,e=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:t,toDst:t}));{const s=o.dirname(e),a=o.join(s,t);return r(a,(e,r)=>e?n(e):r?n(null,{toCwd:a,toDst:t}):i.lstat(t,e=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:t,toDst:o.relative(s,t)})))}},symlinkPathsSync:function(t,e){let n;if(o.isAbsolute(t)){if(!(n=i.existsSync(t)))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}{const r=o.dirname(e),s=o.join(r,t);if(n=i.existsSync(s))return{toCwd:s,toDst:t};if(!(n=i.existsSync(t)))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:o.relative(r,t)}}}}},function(t,e,n){"use strict";const o=n(3);t.exports={symlinkType:function(t,e,n){if(n="function"==typeof e?e:n,e="function"!=typeof e&&e)return n(null,e);o.lstat(t,(t,o)=>{if(t)return n(null,"file");e=o&&o.isDirectory()?"dir":"file",n(null,e)})},symlinkTypeSync:function(t,e){let n;if(e)return e;try{n=o.lstatSync(t)}catch(t){return"file"}return n&&n.isDirectory()?"dir":"file"}}},function(t,e,n){"use strict";const o=n(4).fromCallback,i=n(22);i.outputJson=o(n(64)),i.outputJsonSync=n(65),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,t.exports=i},function(t,e,n){var o;try{o=n(3)}catch(t){o=n(7)}function i(t,e){var n,o="\n";return"object"==typeof e&&null!==e&&(e.spaces&&(n=e.spaces),e.EOL&&(o=e.EOL)),JSON.stringify(t,e?e.replacer:null,n).replace(/\n/g,o)+o}function r(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t=t.replace(/^\uFEFF/,"")}var s={readFile:function(t,e,n){null==n&&(n=e,e={}),"string"==typeof e&&(e={encoding:e});var i=(e=e||{}).fs||o,s=!0;"throws"in e&&(s=e.throws),i.readFile(t,e,(function(o,i){if(o)return n(o);var a;i=r(i);try{a=JSON.parse(i,e?e.reviver:null)}catch(e){return s?(e.message=t+": "+e.message,n(e)):n(null,null)}n(null,a)}))},readFileSync:function(t,e){"string"==typeof(e=e||{})&&(e={encoding:e});var n=e.fs||o,i=!0;"throws"in e&&(i=e.throws);try{var s=n.readFileSync(t,e);return s=r(s),JSON.parse(s,e.reviver)}catch(e){if(i)throw e.message=t+": "+e.message,e;return null}},writeFile:function(t,e,n,r){null==r&&(r=n,n={});var s=(n=n||{}).fs||o,a="";try{a=i(e,n)}catch(t){return void(r&&r(t,null))}s.writeFile(t,a,n,r)},writeFileSync:function(t,e,n){var r=(n=n||{}).fs||o,s=i(e,n);return r.writeFileSync(t,s,n)}};t.exports=s},function(t,e,n){"use strict";const o=n(2),i=n(5),r=n(8).pathExists,s=n(22);t.exports=function(t,e,n,a){"function"==typeof n&&(a=n,n={});const l=o.dirname(t);r(l,(o,r)=>o?a(o):r?s.writeJson(t,e,n,a):void i.mkdirs(l,o=>{if(o)return a(o);s.writeJson(t,e,n,a)}))}},function(t,e,n){"use strict";const o=n(3),i=n(2),r=n(5),s=n(22);t.exports=function(t,e,n){const a=i.dirname(t);o.existsSync(a)||r.mkdirsSync(a),s.writeJsonSync(t,e,n)}},function(t,e,n){"use strict";t.exports={moveSync:n(67)}},function(t,e,n){"use strict";const o=n(3),i=n(2),r=n(30).copySync,s=n(17).removeSync,a=n(5).mkdirpSync,l=n(16);function c(t,e,n){try{o.renameSync(t,e)}catch(o){if("EXDEV"!==o.code)throw o;return function(t,e,n){return r(t,e,{overwrite:n,errorOnExist:true}),s(t)}(t,e,n)}}t.exports=function(t,e,n){const r=(n=n||{}).overwrite||n.clobber||!1,{srcStat:u}=l.checkPathsSync(t,e,"move");return l.checkParentPathsSync(t,u,e,"move"),a(i.dirname(e)),function(t,e,n){if(n)return s(e),c(t,e,n);if(o.existsSync(e))throw new Error("dest already exists.");return c(t,e,n)}(t,e,r)}},function(t,e,n){"use strict";const o=n(4).fromCallback;t.exports={move:o(n(69))}},function(t,e,n){"use strict";const o=n(3),i=n(2),r=n(33).copy,s=n(17).remove,a=n(5).mkdirp,l=n(8).pathExists,c=n(16);function u(t,e,n,i){o.rename(t,e,o=>o?"EXDEV"!==o.code?i(o):function(t,e,n,o){r(t,e,{overwrite:n,errorOnExist:!0},e=>e?o(e):s(t,o))}(t,e,n,i):i())}t.exports=function(t,e,n,o){"function"==typeof n&&(o=n,n={});const r=n.overwrite||n.clobber||!1;c.checkPaths(t,e,"move",(n,d)=>{if(n)return o(n);const{srcStat:f}=d;c.checkParentPaths(t,f,e,"move",n=>{if(n)return o(n);a(i.dirname(e),n=>n?o(n):function(t,e,n,o){if(n)return s(e,i=>i?o(i):u(t,e,n,o));l(e,(i,r)=>i?o(i):r?o(new Error("dest already exists.")):u(t,e,n,o))}(t,e,r,o))})})}},function(t,e,n){"use strict";const o=n(4).fromCallback,i=n(3),r=n(2),s=n(5),a=n(8).pathExists;t.exports={outputFile:o((function(t,e,n,o){"function"==typeof n&&(o=n,n="utf8");const l=r.dirname(t);a(l,(r,a)=>r?o(r):a?i.writeFile(t,e,n,o):void s.mkdirs(l,r=>{if(r)return o(r);i.writeFile(t,e,n,o)}))})),outputFileSync:function(t,...e){const n=r.dirname(t);if(i.existsSync(n))return i.writeFileSync(t,...e);s.mkdirsSync(n),i.writeFileSync(t,...e)}}},function(t,e){t.exports=require("http")},function(t,e,n){var o=n(7),i=n(73),r=n(74),s=n(76),a=n(21),l=n(34).EventEmitter,c=n(13).Transform,u=n(13).PassThrough,d=n(13).Writable;function f(t,e,n){"function"==typeof e&&(n=e,e=null),null==e&&(e={}),null==e.autoClose&&(e.autoClose=!1),null==e.lazyEntries&&(e.lazyEntries=!1),null==e.decodeStrings&&(e.decodeStrings=!0),null==e.validateEntrySizes&&(e.validateEntrySizes=!0),null==e.strictFileNames&&(e.strictFileNames=!1),null==n&&(n=I),o.fstat(t,(function(o,i){if(o)return n(o);h(r.createFromFd(t,{autoClose:!0}),i.size,e,n)}))}function h(t,e,n,o){"function"==typeof n&&(o=n,n=null),null==n&&(n={}),null==n.autoClose&&(n.autoClose=!0),null==n.lazyEntries&&(n.lazyEntries=!1),null==n.decodeStrings&&(n.decodeStrings=!0);var i=!!n.decodeStrings;if(null==n.validateEntrySizes&&(n.validateEntrySizes=!0),null==n.strictFileNames&&(n.strictFileNames=!1),null==o&&(o=I),"number"!=typeof e)throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");t.ref();var r=Math.min(65557,e),s=j(r),a=e-s.length;w(t,s,0,r,a,(function(l){if(l)return o(l);for(var c=r-22;c>=0;c-=1)if(101010256===s.readUInt32LE(c)){var u=s.slice(c),d=u.readUInt16LE(4);if(0!==d)return o(new Error("multi-disk zip files are not supported: found disk number: "+d));var f=u.readUInt16LE(10),h=u.readUInt32LE(16),m=u.readUInt16LE(20),y=u.length-22;if(m!==y)return o(new Error("invalid comment length. expected: "+y+". found: "+m));var g=i?k(u,22,u.length,!1):u.slice(22);if(65535!==f&&4294967295!==h)return o(null,new p(t,h,e,f,g,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames));var b=j(20),S=a+c-b.length;return void w(t,b,0,b.length,S,(function(r){if(r)return o(r);if(117853008!==b.readUInt32LE(0))return o(new Error("invalid zip64 end of central directory locator signature"));var s=P(b,8),a=j(56);w(t,a,0,a.length,s,(function(r){return r?o(r):101075792!==a.readUInt32LE(0)?o(new Error("invalid zip64 end of central directory record signature")):(f=P(a,32),h=P(a,48),o(null,new p(t,h,e,f,g,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames)))}))}))}o(new Error("end of central directory record signature not found"))}))}function p(t,e,n,o,i,r,s,a,c,u){var d=this;l.call(d),d.reader=t,d.reader.on("error",(function(t){y(d,t)})),d.reader.once("close",(function(){d.emit("close")})),d.readEntryCursor=e,d.fileSize=n,d.entryCount=o,d.comment=i,d.entriesRead=0,d.autoClose=!!r,d.lazyEntries=!!s,d.decodeStrings=!!a,d.validateEntrySizes=!!c,d.strictFileNames=!!u,d.isOpen=!0,d.emittedError=!1,d.lazyEntries||d._readEntry()}function m(t,e){t.autoClose&&t.close(),y(t,e)}function y(t,e){t.emittedError||(t.emittedError=!0,t.emit("error",e))}function g(){}function b(t,e){return new Date(1980+(t>>9&127),(t>>5&15)-1,31&t,e>>11&31,e>>5&63,2*(31&e),0)}function S(t){return-1!==t.indexOf("\\")?"invalid characters in fileName: "+t:/^[a-zA-Z]:/.test(t)||/^\//.test(t)?"absolute path: "+t:-1!==t.split("/").indexOf("..")?"invalid relative path: "+t:null}function w(t,e,n,o,i,r){if(0===o)return setImmediate((function(){r(null,j(0))}));t.read(e,n,o,i,(function(t,e){return t?r(t):e<o?r(new Error("unexpected EOF")):void r()}))}function v(t){c.call(this),this.actualByteCount=0,this.expectedByteCount=t}function _(){l.call(this),this.refCount=0}function E(t){u.call(this),this.context=t,this.context.ref(),this.unreffedYet=!1}e.open=function(t,e,n){"function"==typeof e&&(n=e,e=null);null==e&&(e={});null==e.autoClose&&(e.autoClose=!0);null==e.lazyEntries&&(e.lazyEntries=!1);null==e.decodeStrings&&(e.decodeStrings=!0);null==e.validateEntrySizes&&(e.validateEntrySizes=!0);null==e.strictFileNames&&(e.strictFileNames=!1);null==n&&(n=I);o.open(t,"r",(function(t,i){if(t)return n(t);f(i,e,(function(t,e){t&&o.close(i,I),n(t,e)}))}))},e.fromFd=f,e.fromBuffer=function(t,e,n){"function"==typeof e&&(n=e,e=null);null==e&&(e={});e.autoClose=!1,null==e.lazyEntries&&(e.lazyEntries=!1);null==e.decodeStrings&&(e.decodeStrings=!0);null==e.validateEntrySizes&&(e.validateEntrySizes=!0);null==e.strictFileNames&&(e.strictFileNames=!1);h(r.createFromBuffer(t,{maxChunkSize:65536}),t.length,e,n)},e.fromRandomAccessReader=h,e.dosDateTimeToDate=b,e.validateFileName=S,e.ZipFile=p,e.Entry=g,e.RandomAccessReader=_,a.inherits(p,l),p.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())},p.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()},p.prototype._readEntry=function(){var t=this;if(t.entryCount!==t.entriesRead){if(!t.emittedError){var e=j(46);w(t.reader,e,0,e.length,t.readEntryCursor,(function(n){if(n)return m(t,n);if(!t.emittedError){var o=new g,i=e.readUInt32LE(0);if(33639248!==i)return m(t,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(o.versionMadeBy=e.readUInt16LE(4),o.versionNeededToExtract=e.readUInt16LE(6),o.generalPurposeBitFlag=e.readUInt16LE(8),o.compressionMethod=e.readUInt16LE(10),o.lastModFileTime=e.readUInt16LE(12),o.lastModFileDate=e.readUInt16LE(14),o.crc32=e.readUInt32LE(16),o.compressedSize=e.readUInt32LE(20),o.uncompressedSize=e.readUInt32LE(24),o.fileNameLength=e.readUInt16LE(28),o.extraFieldLength=e.readUInt16LE(30),o.fileCommentLength=e.readUInt16LE(32),o.internalFileAttributes=e.readUInt16LE(36),o.externalFileAttributes=e.readUInt32LE(38),o.relativeOffsetOfLocalHeader=e.readUInt32LE(42),64&o.generalPurposeBitFlag)return m(t,new Error("strong encryption is not supported"));t.readEntryCursor+=46,e=j(o.fileNameLength+o.extraFieldLength+o.fileCommentLength),w(t.reader,e,0,e.length,t.readEntryCursor,(function(n){if(n)return m(t,n);if(!t.emittedError){var i=0!=(2048&o.generalPurposeBitFlag);o.fileName=t.decodeStrings?k(e,0,o.fileNameLength,i):e.slice(0,o.fileNameLength);var r=o.fileNameLength+o.extraFieldLength,a=e.slice(o.fileNameLength,r);o.extraFields=[];for(var l=0;l<a.length-3;){var c=a.readUInt16LE(l+0),u=a.readUInt16LE(l+2),d=l+4,f=d+u;if(f>a.length)return m(t,new Error("extra field length exceeds extra field buffer size"));var h=j(u);a.copy(h,0,d,f),o.extraFields.push({id:c,data:h}),l=f}if(o.fileComment=t.decodeStrings?k(e,r,r+o.fileCommentLength,i):e.slice(r,r+o.fileCommentLength),o.comment=o.fileComment,t.readEntryCursor+=e.length,t.entriesRead+=1,4294967295===o.uncompressedSize||4294967295===o.compressedSize||4294967295===o.relativeOffsetOfLocalHeader){var p=null;for(l=0;l<o.extraFields.length;l++){if(1===(g=o.extraFields[l]).id){p=g.data;break}}if(null==p)return m(t,new Error("expected zip64 extended information extra field"));var y=0;if(4294967295===o.uncompressedSize){if(y+8>p.length)return m(t,new Error("zip64 extended information extra field does not include uncompressed size"));o.uncompressedSize=P(p,y),y+=8}if(4294967295===o.compressedSize){if(y+8>p.length)return m(t,new Error("zip64 extended information extra field does not include compressed size"));o.compressedSize=P(p,y),y+=8}if(4294967295===o.relativeOffsetOfLocalHeader){if(y+8>p.length)return m(t,new Error("zip64 extended information extra field does not include relative header offset"));o.relativeOffsetOfLocalHeader=P(p,y),y+=8}}if(t.decodeStrings)for(l=0;l<o.extraFields.length;l++){var g;if(28789===(g=o.extraFields[l]).id){if(g.data.length<6)continue;if(1!==g.data.readUInt8(0))continue;var b=g.data.readUInt32LE(1);if(s.unsigned(e.slice(0,o.fileNameLength))!==b)continue;o.fileName=k(g.data,5,g.data.length,!0);break}}if(t.validateEntrySizes&&0===o.compressionMethod){var w=o.uncompressedSize;if(o.isEncrypted()&&(w+=12),o.compressedSize!==w){var v="compressed/uncompressed size mismatch for stored file: "+o.compressedSize+" != "+o.uncompressedSize;return m(t,new Error(v))}}if(t.decodeStrings){t.strictFileNames||(o.fileName=o.fileName.replace(/\\/g,"/"));var _=S(o.fileName,t.validateFileNameOptions);if(null!=_)return m(t,new Error(_))}t.emit("entry",o),t.lazyEntries||t._readEntry()}}))}}))}}else setImmediate((function(){t.autoClose&&t.close(),t.emittedError||t.emit("end")}))},p.prototype.openReadStream=function(t,e,n){var o=this,r=0,s=t.compressedSize;if(null==n)n=e,e={};else{if(null!=e.decrypt){if(!t.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(!1!==e.decrypt)throw new Error("invalid options.decrypt value: "+e.decrypt);if(t.isCompressed()&&!1!==e.decompress)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(null!=e.decompress){if(!t.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!1!==e.decompress&&!0!==e.decompress)throw new Error("invalid options.decompress value: "+e.decompress)}if(null!=e.start||null!=e.end){if(t.isCompressed()&&!1!==e.decompress)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(t.isEncrypted()&&!1!==e.decrypt)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(null!=e.start){if((r=e.start)<0)throw new Error("options.start < 0");if(r>t.compressedSize)throw new Error("options.start > entry.compressedSize")}if(null!=e.end){if((s=e.end)<0)throw new Error("options.end < 0");if(s>t.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<r)throw new Error("options.end < options.start")}}if(!o.isOpen)return n(new Error("closed"));if(t.isEncrypted()&&!1!==e.decrypt)return n(new Error("entry is encrypted, and options.decrypt !== false"));o.reader.ref();var a=j(30);w(o.reader,a,0,a.length,t.relativeOffsetOfLocalHeader,(function(l){try{if(l)return n(l);var c=a.readUInt32LE(0);if(67324752!==c)return n(new Error("invalid local file header signature: 0x"+c.toString(16)));var u,d=a.readUInt16LE(26),f=a.readUInt16LE(28),h=t.relativeOffsetOfLocalHeader+a.length+d+f;if(0===t.compressionMethod)u=!1;else{if(8!==t.compressionMethod)return n(new Error("unsupported compression method: "+t.compressionMethod));u=null==e.decompress||e.decompress}var p=h,m=p+t.compressedSize;if(0!==t.compressedSize&&m>o.fileSize)return n(new Error("file data overflows file bounds: "+p+" + "+t.compressedSize+" > "+o.fileSize));var y=o.reader.createReadStream({start:p+r,end:p+s}),g=y;if(u){var b=!1,S=i.createInflateRaw();y.on("error",(function(t){setImmediate((function(){b||S.emit("error",t)}))})),y.pipe(S),o.validateEntrySizes?(g=new v(t.uncompressedSize),S.on("error",(function(t){setImmediate((function(){b||g.emit("error",t)}))})),S.pipe(g)):g=S,g.destroy=function(){b=!0,S!==g&&S.unpipe(g),y.unpipe(S),y.destroy()}}n(null,g)}finally{o.reader.unref()}}))},g.prototype.getLastModDate=function(){return b(this.lastModFileDate,this.lastModFileTime)},g.prototype.isEncrypted=function(){return 0!=(1&this.generalPurposeBitFlag)},g.prototype.isCompressed=function(){return 8===this.compressionMethod},a.inherits(v,c),v.prototype._transform=function(t,e,n){if(this.actualByteCount+=t.length,this.actualByteCount>this.expectedByteCount){var o="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return n(new Error(o))}n(null,t)},v.prototype._flush=function(t){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return t(new Error(e))}t()},a.inherits(_,l),_.prototype.ref=function(){this.refCount+=1},_.prototype.unref=function(){var t=this;if(t.refCount-=1,!(t.refCount>0)){if(t.refCount<0)throw new Error("invalid unref");t.close((function(e){if(e)return t.emit("error",e);t.emit("close")}))}},_.prototype.createReadStream=function(t){var e=t.start,n=t.end;if(e===n){var o=new u;return setImmediate((function(){o.end()})),o}var i=this._readStreamForRange(e,n),r=!1,s=new E(this);i.on("error",(function(t){setImmediate((function(){r||s.emit("error",t)}))})),s.destroy=function(){i.unpipe(s),s.unref(),i.destroy()};var a=new v(n-e);return s.on("error",(function(t){setImmediate((function(){r||a.emit("error",t)}))})),a.destroy=function(){r=!0,s.unpipe(a),s.destroy()},i.pipe(s).pipe(a)},_.prototype._readStreamForRange=function(t,e){throw new Error("not implemented")},_.prototype.read=function(t,e,n,o,i){var r=this.createReadStream({start:o,end:o+n}),s=new d,a=0;s._write=function(n,o,i){n.copy(t,e+a,0,n.length),a+=n.length,i()},s.on("finish",i),r.on("error",(function(t){i(t)})),r.pipe(s)},_.prototype.close=function(t){setImmediate(t)},a.inherits(E,u),E.prototype._flush=function(t){this.unref(),t()},E.prototype.unref=function(t){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var j,x="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";function k(t,e,n,o){if(o)return t.toString("utf8",e,n);for(var i="",r=e;r<n;r++)i+=x[t[r]];return i}function P(t,e){var n=t.readUInt32LE(e);return 4294967296*t.readUInt32LE(e+4)+n}function I(t){if(t)throw t}j="function"==typeof Buffer.allocUnsafe?function(t){return Buffer.allocUnsafe(t)}:function(t){return new Buffer(t)}},function(t,e){t.exports=require("zlib")},function(t,e,n){var o=n(7),i=n(21),r=n(13),s=r.Readable,a=r.Writable,l=r.PassThrough,c=n(75),u=n(34).EventEmitter;function d(t,e){e=e||{},u.call(this),this.fd=t,this.pend=new c,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}function f(t,e){e=e||{},s.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}function h(t,e){e=e||{},a.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=null==e.end?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}function p(t,e){u.call(this),e=e||{},this.refCount=0,this.buffer=t,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}e.createFromBuffer=function(t,e){return new p(t,e)},e.createFromFd=function(t,e){return new d(t,e)},e.BufferSlicer=p,e.FdSlicer=d,i.inherits(d,u),d.prototype.read=function(t,e,n,i,r){var s=this;s.pend.go((function(a){o.read(s.fd,t,e,n,i,(function(t,e,n){a(),r(t,e,n)}))}))},d.prototype.write=function(t,e,n,i,r){var s=this;s.pend.go((function(a){o.write(s.fd,t,e,n,i,(function(t,e,n){a(),r(t,e,n)}))}))},d.prototype.createReadStream=function(t){return new f(this,t)},d.prototype.createWriteStream=function(t){return new h(this,t)},d.prototype.ref=function(){this.refCount+=1},d.prototype.unref=function(){var t=this;if(t.refCount-=1,!(t.refCount>0)){if(t.refCount<0)throw new Error("invalid unref");t.autoClose&&o.close(t.fd,(function(e){e?t.emit("error",e):t.emit("close")}))}},i.inherits(f,s),f.prototype._read=function(t){var e=this;if(!e.destroyed){var n=Math.min(e._readableState.highWaterMark,t);if(null!=e.endOffset&&(n=Math.min(n,e.endOffset-e.pos)),n<=0)return e.destroyed=!0,e.push(null),void e.context.unref();e.context.pend.go((function(t){if(e.destroyed)return t();var i=new Buffer(n);o.read(e.context.fd,i,0,n,e.pos,(function(n,o){n?e.destroy(n):0===o?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(i.slice(0,o))),t()}))}))}},f.prototype.destroy=function(t){this.destroyed||(t=t||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",t),this.context.unref())},i.inherits(h,a),h.prototype._write=function(t,e,n){var i=this;if(!i.destroyed){if(i.pos+t.length>i.endOffset){var r=new Error("maximum file length exceeded");return r.code="ETOOBIG",i.destroy(),void n(r)}i.context.pend.go((function(e){if(i.destroyed)return e();o.write(i.context.fd,t,0,t.length,i.pos,(function(t,o){t?(i.destroy(),e(),n(t)):(i.bytesWritten+=o,i.pos+=o,i.emit("progress"),e(),n())}))}))}},h.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},i.inherits(p,u),p.prototype.read=function(t,e,n,o,i){var r=o+n,s=r-this.buffer.length,a=s>0?s:n;this.buffer.copy(t,e,o,r),setImmediate((function(){i(null,a)}))},p.prototype.write=function(t,e,n,o,i){t.copy(this.buffer,o,e,e+n),setImmediate((function(){i(null,n,t)}))},p.prototype.createReadStream=function(t){var e=new l(t=t||{});e.destroyed=!1,e.start=t.start||0,e.endOffset=t.end,e.pos=e.endOffset||this.buffer.length;for(var n=this.buffer.slice(e.start,e.pos),o=0;;){var i=o+this.maxChunkSize;if(i>=n.length){o<n.length&&e.write(n.slice(o,n.length));break}e.write(n.slice(o,i)),o=i}return e.end(),e.destroy=function(){e.destroyed=!0},e},p.prototype.createWriteStream=function(t){var e=this,n=new a(t=t||{});return n.start=t.start||0,n.endOffset=null==t.end?this.buffer.length:+t.end,n.bytesWritten=0,n.pos=n.start,n.destroyed=!1,n._write=function(t,o,i){if(!n.destroyed){var r=n.pos+t.length;if(r>n.endOffset){var s=new Error("maximum file length exceeded");return s.code="ETOOBIG",n.destroyed=!0,void i(s)}t.copy(e.buffer,n.pos,0,t.length),n.bytesWritten+=t.length,n.pos=r,n.emit("progress"),i()}},n.destroy=function(){n.destroyed=!0},n},p.prototype.ref=function(){this.refCount+=1},p.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")}},function(t,e){function n(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}function o(t){t.pending+=1;var e=!1;return function(o){if(e)throw new Error("callback called twice");if(e=!0,t.error=t.error||o,t.pending-=1,t.waiting.length>0&&t.pending<t.max)i(t,t.waiting.shift());else if(0===t.pending){var r=t.listeners;t.listeners=[],r.forEach(n)}};function n(e){e(t.error)}}function i(t,e){e(o(t))}t.exports=n,n.prototype.go=function(t){this.pending<this.max?i(this,t):this.waiting.push(t)},n.prototype.wait=function(t){0===this.pending?t(this.error):this.listeners.push(t)},n.prototype.hold=function(){return o(this)}},function(t,e,n){var o=n(77).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function r(t){if(o.isBuffer(t))return t;var e="function"==typeof o.alloc&&"function"==typeof o.from;if("number"==typeof t)return e?o.alloc(t):new o(t);if("string"==typeof t)return e?o.from(t):new o(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function s(t,e){t=r(t),o.isBuffer(e)&&(e=e.readUInt32BE(0));for(var n=-1^~~e,s=0;s<t.length;s++)n=i[255&(n^t[s])]^n>>>8;return-1^n}function a(){return t=s.apply(null,arguments),(e=r(4)).writeInt32BE(t,0),e;var t,e}"undefined"!=typeof Int32Array&&(i=new Int32Array(i)),a.signed=function(){return s.apply(null,arguments)},a.unsigned=function(){return s.apply(null,arguments)>>>0},t.exports=a},function(t,e){t.exports=require("buffer")},function(t,e,n){const o=n(26);let i;t.exports=class t{static getInstance(){return i||(i=new t),i}constructor(){this._process=new Map}exec(t,e,n){this._nextId++;let i=t.shift(),r=e.tag;delete e.tag,e.shell=!0;let s=o.spawn(i,t,e);console.log(`[CLI] spawn (${s.pid}): ${i} ${t.join(" ")}`);let a=this._process;a.set(r,s);let l=[],c=[];s.stdout.on("data",t=>{l.push(t),"object"==typeof n&&n.stdout(t)}),s.stderr.on("data",t=>{c.push(t),"object"==typeof n&&n.stderr(t)}),s.on("error",t=>{a.has(r)&&a.delete(r),"object"==typeof n?n.error(t,l.join(""),c.join("")):"function"==typeof n&&n(t,l.join(""),c.join(""))}),s.on("exit",(t,e)=>{e=e||"",console.log(`[CLI] exit (${s.pid}) ${t} ${e}`),a.has(r)&&a.delete(r),"object"==typeof n?n.exit(l.join(""),c.join("")):"function"==typeof n&&n(null,l.join(""),c.join(""))})}kill(t){if(this._process.has(t)){let e=this._process[t];e&&e.kill(),this._process.delete(t)}}query(t){return this._process.has(t)}}},function(t,e,n){let o;n(88),t.exports=class t{static getInstance(){return o||(o=new t),o}constructor(){this._enableClose=!1,this._dialog=getConsoleOutputDialog(),this._dialog.on("dialogbeforeclose",(t,e)=>this._enableClose),this._output=this._dialog.find(".output"),this._buttonsHtml=this._dialog.parent().find(".ui-dialog-buttonset button"),this.disableClose()}open(){this._dialog.dialog("open"),this._dialog.dialog("moveToTop")}close(){this._dialog.dialog("close")}enableClose(){this._enableClose=!0,this._buttonsHtml.button("enable")}disableClose(){this._enableClose=!1,this._buttonsHtml.button("disable")}log(t){let e=$("<div>").html(t.autoLink());this._output.append(e),this._output.append("\n")}clear(){this._output.empty()}}},,,,,,,function(t,e){t.exports=require("process")},function(t,e,n){var o=n(2),i=n(7),r=parseInt("0777",8);function s(t,e,n,a){"function"==typeof e?(n=e,e={}):e&&"object"==typeof e||(e={mode:e});var l=e.mode,c=e.fs||i;void 0===l&&(l=r&~process.umask()),a||(a=null);var u=n||function(){};t=o.resolve(t),c.mkdir(t,l,(function(n){if(!n)return u(null,a=a||t);switch(n.code){case"ENOENT":s(o.dirname(t),e,(function(n,o){n?u(n,o):s(t,e,u,o)}));break;default:c.stat(t,(function(t,e){t||!e.isDirectory()?u(n,a):u(null,a)}))}}))}t.exports=s.mkdirp=s.mkdirP=s,s.sync=function t(e,n,s){n&&"object"==typeof n||(n={mode:n});var a=n.mode,l=n.fs||i;void 0===a&&(a=r&~process.umask()),s||(s=null),e=o.resolve(e);try{l.mkdirSync(e,a),s=s||e}catch(i){switch(i.code){case"ENOENT":s=t(o.dirname(e),n,s),t(e,n,s);break;default:var c;try{c=l.statSync(e)}catch(t){throw i}if(!c.isDirectory())throw i}}return s}},function(t,e){(function(){var t=[].slice;String.prototype.autoLink=function(){var e,n,o,i,r,s;return r=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,0<(i=1<=arguments.length?t.call(arguments,0):[]).length?(o=i[0],n=function(){var t;for(e in t=[],o)s=o[e],"callback"!==e&&t.push(" "+e+"='"+s+"'");return t}().join(""),this.replace(r,(function(t,e,i){return""+e+(("function"==typeof o.callback?o.callback(i):void 0)||"<a href='"+i+"'"+n+">"+i+"</a>")}))):this.replace(r,"$1<a href='$2'>$2</a>")}}).call(this)},function(t,e,n){const o="win32"===n(11).platform()?"\\":"/";t.exports=class{constructor(t,e){let n=null;if("string"==typeof t){let e=(t=t.toString()).charAt(t.length-1);"/"!==e&&"\\"!==e||(t=t.substring(0,t.length-2)),n=t.substring(t.lastIndexOf(o)+1)}else n=t.projectName,t=t.projectPath;this._name=n,this._path=t,this._engine=e,this._icon=""}validate(){return!1}get name(){return this._name}get path(){return this._path}get engine(){return this._engine}get icon(){return this._icon}}},function(t,e,n){const{ipcRenderer:o}=n(10);let i;t.exports=class t{static getInstance(){return i||(i=new t),i}constructor(){o.on("download-status",(t,e)=>{"interrupted"===e.state?(this._downloadFailList.push(this._downloadingPlugin),this.download()):"progressing"===e.state&&this.setProgress(e.downloadRatio)}),o.on("download-finish",(t,e)=>{delete this._dlUrl,"completed"===e.state?this._downloadSuccessList.push(this._downloadingPlugin):(this._downloadFailList.push(this._downloadingPlugin),console.log("download failed:"+e.state)),this.download()}),this._dialog=getDownloadDialog(),this._dialog.on("dialogbeforeclose",(t,e)=>(this._dlUrl&&o.send("cancel-download-file",this._dlUrl),!0)),this._download_bar=this._dialog.parent().find(".download-progress .download-bar"),this._download_label=this._dialog.parent().find(".download-progress .download-bar .download-label")}startDownload(t,e,n){this._dlUrl=url,this._downloadList=t,this._downloadSuccessList=[],this._downloadFailList=[],this._pluginVersion=e,this._downloadingPlugin=null,this._callback=n,dataMgr.getInstance().fetchManifest((t,e)=>{null!=t?(this.download(),this.show()):this._callback(null,e)})}download(){this._downloadingPlugin=this._downloadList.shift(),this._downloadingPlugin?(this._dlUrl=dataMgr.getInstance().getDownloadPath(this._downloadingPlugin,this._pluginVersion),this._dlUrl?o.send("download-file",this._dlUrl):(this._downloadFailList.push(this._downloadingPlugin),this.download())):0==this._downloadFailList.size()?this._callback(this._downloadSuccessList,null):this._callback(this._downloadSuccessList,"not all plugin download success")}setProgress(t){this._download_bar.css("width",Math.floor(t)+"%"),this._download_label.html(t+"%")}show(){this._dialog.dialog("open"),this._dialog.dialog("moveToTop")}hiden(){this._dialog.dialog("close")}}},function(t,e,n){const o=n(23),i=n(11),r=n(2),s=n(7),{ipcRenderer:a}=n(10);n(10).remote.dialog;n(88);const l=n(37),c=n(36),u=n(38);let d;t.exports=class t{static getInstance(){return d||(d=new t),d}constructor(t){this.options=t,"installer"in this.options&&(this.options.installer=!1),this.sdkbox_path=u.getSdkboxBinPath(),this._enableClose=!1,this._dialog||(this._dialog=getInstallSdkboxPluginsDialog(),this._dialog.on("dialogbeforeclose",(t,e)=>this._enableClose),this._downloads=this._dialog.find(".download-plugin-list"),this._downloadItemTemplate=this._downloads.find(".download-plugin-item.hidden"),this._documents=this._dialog.find(".plugin-document-list"),this._documentItemTemplate=this._documents.find(".plugin-document-item.hidden"),this._cliOutput=this._dialog.find(".import-cli-output"),this._buttonCancel=this._dialog.parent().find(".ui-dialog-buttonset button"),this._downloadItemTemplate.detach(),this._documentItemTemplate.detach(),this.registerDownloadEvent()),this.clear(),c.getInstance().fetchManifest((t,e)=>{e||(this.resetDownloadItems(this.options.plugins,this.options.installer),this.resetDialog(),this.enableClose(),this._buttonCancel.addClass("ui-state-active"),this.tryInstall(),this.downloadNext())})}show(){this._dialog.dialog("open"),this._dialog.dialog("moveToTop")}close(){this._dialog.dialog("close")}enableClose(){this._enableClose=!0,this._buttonCancel.button("enable")}disableClose(){this._enableClose=!1,this._buttonCancel.button("disable")}clear(){this._buttonCancel.text("Cancel"),this._downloads.empty(),this._downloads.append(this._downloadItemTemplate),this._documents.empty(),this._documents.append(this._documentItemTemplate),this._cliOutput.empty()}appendDependency(t){let e=c.getInstance().getDependency(t);return e=e.concat(t),e=o.arrayUnique(e)}resetDownloadItems(t,e){const n=this.appendDependency(t);let o=[];e&&o.push({name:"Installer",bundle:c.getInstance().getInstallerPath(),status:"pending"});for(let t in n){const e=n[t],i=c.getInstance().getDownloadPath(e,"v3");null!=i&&o.push({name:e,display_name:c.getInstance().getDisplayName(e),bundle:i,status:this.checkPluginValid(i)})}this._installItems=o}checkPluginValid(t){let e=t.bundle.split("/").pop(),n=r.join(i.homedir(),".sdkbox","plugins",e);if(s.existsSync(n))return"ready";{n=n.slice(0,-7);let t=null;try{t=s.statSync(n)}catch(e){t=null}return t&&t.isDirectory()?"ready":"pending"}}resetDialog(){for(let t in this._installItems){const e=this._installItems[t];let n=this._downloadItemTemplate.clone();if(n.removeClass("hidden"),n.find(".download-plugin-name").html(e.display_name),n.find(".download-plugin-status").html(e.status),"ready"==e.status&&(n.find(".download-plugin-bar").css("width","100%"),n.find(".download-plugin-label").html("100%")),this._downloads.append(n),"installer"===e.name.toLowerCase())continue;if("googleplayservices"===e.name)continue;let o=this._documentItemTemplate.clone();o.removeClass("hidden"),o.find(".plugin-document-item-name").html(e.display_name);const i=e.name.toLowerCase();o.find(".plugin-document-item-docs").attr("href","http://docs.sdkbox.com/en/plugins/"+i),o.find(".plugin-document-item-sample").attr("href","https://github.com/sdkbox/sdkbox-sample-"+i),this._documents.append(o)}}changeItemStatus(t,e,n){for(var o=this._downloads.children().length-1;o>=0;o--){let i=this._downloads.children().eq(o);const r=i.find(".download-plugin-name").text();if(this.compareCaseInsensitive(t,r)){e&&(e<1&&(e=1),i.find(".download-plugin-bar").css("width",Math.floor(e)+"%"),i.find(".download-plugin-label").html(Math.floor(e)+"%")),n&&i.find(".download-plugin-status").html(n);break}}}compareCaseInsensitive(t,e){return t.toLowerCase()===e.toLowerCase()}showlog(t){this._cliOutput.append($("<div>").html(t))}registerDownloadEvent(){a.on("download-status",(t,e)=>{"interrupted"===e.state?(this.setDownloadItemStatus(e.url,null,"download failed"),this.downloadNext()):"progressing"===e.state&&this.setDownloadItemStatus(e.url,e.downloadRatio,"downloading")}),a.on("download-finish",(t,e)=>{delete this._dlUrl,"completed"===e.state?(this.setDownloadItemStatus(e.url,100,"downloading"),this.moveDownloadFile(e.url)):(this.setDownloadItemStatus(e.url,null,"download failed"),console.log("download failed:"+e.state),this.tryInstall()),this.downloadNext()})}downloadNext(){const t=this.findFirstItem("pending");t?t!=this._downloadingItem&&(this._downloadingItem=t,this.showlog(`Begin download ${t.bundle.bundle}`),a.send("download-file",t.bundle.bundle)):this.disableClose()}findFirstItem(t){for(let e in this._installItems){const n=this._installItems[e];if(t==n.status)return n}}setDownloadItemStatus(t,e,n){for(let o in this._installItems){const i=this._installItems[o];if(this.compareCaseInsensitive(t,i.bundle.bundle)||this.compareCaseInsensitive(t,i.name)){n&&(i.status=n),this.changeItemStatus(i.display_name,e,n);break}}}moveDownloadFile(t){let e=t.split("/").pop(),n=r.join(i.homedir(),".sdkbox","temp",e),o=r.join(i.homedir(),".sdkbox","plugins",e);try{s.rename(n,o,()=>{this.setDownloadItemStatus(t,null,"ready"),this.tryInstall()})}catch(e){this.setDownloadItemStatus(t,null,"download failed"),this.tryInstall()}}tryInstall(){let t=this.findFirstItem("pending");t||(t=this.findFirstItem("downloading"))||this.installNext()}installNext(){const t=this.findFirstItem("ready");if(!t)return this._buttonCancel.text("Finish"),this.enableClose(),c.getInstance().getInstalledPlugins(this.options.project,null,!0),void this.showlog("Install Finish");this.showlog(`Begin install ${t.name}`),this.installPlugin(t.name)}installPlugin(t,e="import"){if(null==this.options.project)return void this.showlog("Error! Project path is null");if(!this.sdkbox_path)return void this.showlog("Error! Can not find SDKBox installer");let n=l.getInstance(),o="sdkbox import "+this.options.project;if(n.query(o))return;this.setDownloadItemStatus(t,null,"installing");let i=[this.sdkbox_path,"--alwaysupdate","--nohelp","--runin","gui-creator","-s","main",e,t];t in this.options.installedPlugins&&(i.push("--forcecopy"),i.push("--nopatching")),c.getInstance().isStaging()&&i.push("--staging"),"tapcore"==t&&(i.push("--apitoken"),i.push(this.options.tapcore_token));const r=c.getInstance().getProjectByPath(this.options.project);if(r){if(!r.isXcodeProjectEnable()&&!r.isAndroidProjectEnable())return;let t=r.getSelectXcodeProject();r.isXcodeProjectEnable()&&t&&(i.push("--projectpath"),i.push(t)),t=r.getSelectAndroidProject(),r.isAndroidProjectEnable()&&t&&(i.push("--projectpath"),i.push(t))}let s={tag:o,cwd:this.options.project};this.showlog("> "+i.join(" ")),n.exec(i,s,{stdout:t=>{this.showlog(t.toString())},stderr:t=>{this.showlog(t.toString())},exit:(n,o)=>{this.setDownloadItemStatus(t,null,"success"),this.showlog(""),this.showlog("-----------------------------------"),this.showlog(""),this.installNext(),"import"==e&&this.installDTS(t)},error:(e,n,o)=>{this.setDownloadItemStatus(t,null,"install failed"),this.showlog(e.toString()),this.installNext()}})}installDTS(t){const e=c.getInstance().getPluginPath(t),n=r.join(e,"plugin","jsbindings");if(!o.isDir(n))return;const i=s.readdirSync(n).filter(t=>t.endsWith(".d.ts")),a=this.options.creator_project_root;for(var l=i.length-1;l>=0;l--)o.copy(r.join(n,i[l]),r.join(a,"sdkbox","js","assist"))}}},,,,function(t,e){const n=$("#contents"),o=$("#tabbar li");function i(t){n.find("div.tab-contents").addClass("hidden"),n.find("div#tab-"+t).removeClass("hidden"),n.find("div#tab-"+t).focus(),o.removeClass("selected"),$("#tabbar li[tag="+t+"]").addClass("selected")}o.each((t,e)=>{$(e).on("click",t=>{let e=$(t.target);e.hasClass("selected")||i(e.attr("tag"))})}),e.select_tab=i},function(t,e,n){const o=n(7),i=n(11),r=n(10),s=n(10).ipcRenderer,{BrowserWindow:a,dialog:l}=n(10).remote,c=n(2),u=n(38),d=n(37),f=n(109),h=(n(110),n(111)),p=n(112),m=(n(79),n(90),n(91)),y=n(36),g=n(114),b=n(23),S=n(23).queryParams();t.exports=class{constructor(){this.sdkbox_path=u.getSdkboxBinPath(),this._configs={},this._addCurProjectIf(),this._listHtml=$("#tab-cocos .projects-list ul"),this._projectHtmlTpl=this._listHtml.find("li.template");let t=$("#tab-cocos .projects-details");this._detailsPlaceholderHtml=t.find(".placeholder"),this._detailsPlaceholderHtml.show(),this._detailsWrapperHtml=t.find(".details"),this._detailsWrapperHtml.hide(),this._detailsHtml={},this._detailsHtml.name={icon:t.find(".name .icon img"),title:t.find(".name h2")};let e=t.find(".basics");this._detailsHtml.basics={location:e.find(".location span"),xcodeProjectPath:e.find(".xcode-project-path select"),androidProjectPath:e.find(".android-project-path select"),xcodeProjectCheckBox:e.find(".xcode-project-path input"),androidProjectCheckBox:e.find(".android-project-path input"),engine:e.find(".engine span"),buildHint:t.find(".build-hint")},this._detailsHtml.basics.xcodeProjectPath.change(t=>{this.curPoject.setSelectXcodeProject($(t.target).children("option:selected").val())}),this._detailsHtml.basics.androidProjectPath.change(t=>{this.curPoject.setSelectAndroidProject($(t.target).children("option:selected").val())}),this._detailsHtml.basics.xcodeProjectCheckBox.change(t=>{const e=this._detailsHtml.basics.xcodeProjectCheckBox.is(":checked");this.curPoject.setXcodeProjectEnable(e)}),this._detailsHtml.basics.androidProjectCheckBox.change(t=>{const e=this._detailsHtml.basics.androidProjectCheckBox.is(":checked");this.curPoject.setAndroidProjectEnable(e)}),this._detailsHtml.live={blocks:t.find(".live"),tbody:t.find(".live.block tbody")},this._detailsHtml.plugins={tbody:t.find(".plugins.block tbody")},$("button.import").on("click",()=>{this._onImportClick()}),$(".forStandalone").hide(),t.find("button.build-project").on("click",()=>{this._onBuildProjectClick()}),this._buttons={import:t.find("button.import-plugin"),update:t.find("button.update-all-plugins"),open:t.find("button.open-project-folder"),build:t.find("button.build-project")},t.find("button.open-project-folder").on("click",()=>{this._onOpenProjectFolderClick()}),t.find("button.remove-project").on("click",()=>{this._onRemoveProjectClick()}),t.find("button.import-plugin").on("click",()=>{this.curPoject.isAndroidProjectEnable()||this.curPoject.isXcodeProjectEnable()?this._onImportPluginClick():alert("Anroid and Xcode project both is disable")}),t.find("button.update-all-plugins").on("click",()=>{this.curPoject.isAndroidProjectEnable()||this.curPoject.isXcodeProjectEnable()?this._onUpdateAllPluginsClick():alert("Anroid and Xcode project both is disable")});const n=$("#tab-cocos .tab-cocos-staging-flag");n.change((function(){n.is(":checked")?y.getInstance().changeServer("staging"):y.getInstance().changeServer("production")})),this._projects=new f(h),y.getInstance().projs=this._projects,this._loaders=new Map,this._importPluginsDialog=new p,this._importPluginsDialog.load(),y.getInstance().observeInstalledPlugin((t,e)=>{this.observerInstalledPlugin(t,e)}),Array.isArray(this._configs.cocosProjects)&&this._configs.cocosProjects.forEach(t=>{this._addProject(t,!0)}),s.on("SDKBox:build-finish",()=>{this._configs.cocosProjects=[],this._addCurProjectIf(),this._listHtml.empty(),this._projects.clear(),Array.isArray(this._configs.cocosProjects)&&this._configs.cocosProjects.forEach(t=>{this._addProject(t,!0)}),this._detailsPlaceholderHtml.show(),this._detailsWrapperHtml.hide(),this._showFirstProjectDetail()}),u.installIf(),this._showFirstProjectDetail()}_showBuildHint(t){t?this._detailsHtml.basics.buildHint.show():this._detailsHtml.basics.buildHint.hide()}_addCurProjectIf(){let t=this._findProjects(S.project);for(let e in t)this._addProjectIf(t[e]);if(null==this._configs.cocosProjects||0==this._configs.cocosProjects.length){const t=c.basename(S.project);this._addProjectIf({projectName:t,projectPath:S.project})}}_addProjectIf(t){this._configs.cocosProjects=this._configs.cocosProjects||[];const e=this._configs.cocosProjects.indexOf(t);0!=e&&(e>0&&this._configs.cocosProjects.removeAt(e),this._configs.cocosProjects.unshift(t))}_findProjects(t){const e=c.basename(t);let n=[],r=c.join(t,"local","builder.json"),s="./build";o.existsSync(r)&&(s=JSON.parse(o.readFileSync(r,"utf8")).buildPath),"win32"==i.platform()?s.length>2&&":"==s[1]||(s=c.join(t,s)):s.startsWith("/")||(s=c.join(t,s));const a=s;let l=c.join(a,"jsb-default");return b.isDir(l)&&n.push({projectName:e,projectPath:l}),l=c.join(a,"jsb-link"),b.isDir(l)&&n.push({projectName:e,projectPath:l}),l=c.join(a,"jsb-binary"),b.isDir(l)&&n.push({projectName:e,projectPath:l}),n}_onImportClick(){s.send("open-file-dialog"),s.once("selected-directory",(t,e)=>{if(e)try{e=e[0],this._addProject(e)}catch(t){l.showErrorBox("Import Project Failed",t.toString())}})}_onBuildProjectClick(){s.send("builder:open")}_onOpenProjectFolderClick(){let t=this._detailsHtml.basics.location.text(),e=this._projects.get(t);r.shell.showItemInFolder(e.path),r.shell.beep()}_onRemoveProjectClick(){l.showMessageBox({type:"question",buttons:["No","Yes"],defaultId:0,title:"Are you sure remove selected project ?",message:"Are you sure remove selected project ?",detail:"Project folder and files will not be deleted.",cancelId:0},t=>{if(1==t){let t=this._detailsHtml.basics.location.text(),n=d.getInstance();n.kill("sdkbox info "+t),n.kill("sdkbox list "+t),n.kill("sdkbox import "+t),this._listHtml.find("> li").each((e,n)=>{$(n).attr("path")===t&&$(n).remove()}),this._projects.remove(t),this._detailsPlaceholderHtml.show(),this._detailsWrapperHtml.hide();var e=this._configs.cocosProjects.indexOf(t);e>-1?(this._configs.cocosProjects.splice(e,1),g.getInstance().save(this._configs)):console.log(`remove project, can't find ${t}`)}})}_onImportPluginClick(){let t=this._detailsHtml.basics.location.text(),e=this._projects.get(t);this._importPluginsDialog.open(e,()=>{this._queryProjectSdkboxInfo(e,!0)})}_onUpdateAllPluginsClick(){let t=this._detailsHtml.basics.location.text(),e=this._projects.get(t);if(0==e.plugins.length){let t={type:"question",buttons:["OK"],defaultId:0,title:"Warning",message:"No SDKBox plugin installed! Needn't update.",cancelId:1};l.showMessageBox(a.getFocusedWindow(),t,t=>{})}else{let t={type:"question",buttons:["Update","Cancel"],defaultId:0,title:"Confirm update all installed plugins",message:"Confirm update all installed plugins:",detail:e.path,cancelId:1};l.showMessageBox(a.getFocusedWindow(),t,t=>{0===t&&this._updateAllPlugins(e)})}}_showLoader(t){if(this._loaders.has(t.path))return!1;let e=this._queryItem(t);return e&&e.find(".loader").show(),this._loaders.set(t.path,!0),!0}_hideLoader(t){if(!this._loaders.has(t.path))return!1;let e=this._queryItem(t);return e&&e.find(".loader").hide(),this._loaders.delete(t.path),!0}_showFirstProjectDetail(){let t=this._projects.first();this.curPoject=t,this._showProjectDetail(t,this._queryItem(t))}_showProjectDetail(t,e){t&&e&&(this._listHtml.find("> li").removeClass("selected"),e.addClass("selected"),this._updateDetails(t,!0),this._detailsPlaceholderHtml.hide(),this._detailsWrapperHtml.show(),this._queryProjectSdkboxInfo(t))}_addProject(t,e){let n=null;try{n=this._projects.add(t)}catch(t){return}let o=this._projectHtmlTpl.clone();if(o.attr("path",n.path),o.find(".loader").hide(),o.removeClass("template"),o.on("click",()=>{this.curPoject=n,this._showProjectDetail(n,o)}),this._listHtml.append(o),this._updateItem(n),this._queryProjectSdkboxInfo(n),!e){Array.isArray(this._configs.cocosProjects)||(this._configs.cocosProjects=[]);let e=this._configs.cocosProjects;e.push(t);let n=e.length,o=new Map;for(let t=n-1;t>=0;t--)o.has(e[t])?e.splice(t,1):o.set(e[t],!0);g.getInstance().save(this._configs)}}_queryItem(t){if(!t)return null;let e=this._listHtml.find("> li");for(let n=0;n<e.length;n++){let o=$(e[n]);if(o.attr("path")==t.path)return o}return null}_updateItem(t){let e=this._queryItem(t);if(!e)return;e.find(".icon img").attr("src","../assets/img/cocos-project-icon.png"),e.find(".name h2").text(t.name),t.live&&e.find(".tags").append("<span>Live</span>");let n=e.find(".plugins-tags");n.empty(),$.each(t.plugins,(t,e)=>{n.append("<span>"+e.name+"</span>")})}_updateDetails(t,e){let n=this._detailsHtml;if(!e&&n.basics.location.text()!==t.path)return;n.name.icon.attr("src","../assets/img/cocos-project-icon.png"),n.name.title.text(t.name),n.basics.location.text(t.path),n.basics.xcodeProjectPath.empty(),t.getXcodeProjects().forEach(t=>{n.basics.xcodeProjectPath.append(`<option value ="${c.basename(t)}">${t}</option>`)}),n.basics.xcodeProjectPath.children(`option:eq(${t.getSelectXcodeProject()})`).prop("selected",!0),n.basics.androidProjectPath.empty(),t.getAndroidProjects().forEach(t=>{n.basics.androidProjectPath.append(`<option value ="${c.basename(t)}">${t}</option>`)}),n.basics.androidProjectPath.children(`option:eq(${t.getSelectAndroidProject()})`).prop("selected",!0),n.basics.engine.text(t.engine),t instanceof h&&null==t.template?(n.basics.buildHint.show(),this._buttons.import.attr("disabled",!0).addClass("ui-state-disabled"),this._buttons.update.attr("disabled",!0).addClass("ui-state-disabled")):(n.basics.buildHint.hide(),this._buttons.import.attr("disabled",!1).removeClass("ui-state-disabled"),this._buttons.update.attr("disabled",!1).removeClass("ui-state-disabled")),t.live?n.live.blocks.show():n.live.blocks.hide();let o=n.plugins.tbody;o.empty(),Array.isArray(t.plugins)&&$(t.plugins).each((t,e)=>{let n=y.getInstance().getDisplayName(e.name.toString());n=n||e.name.toString();let i="</td><td>-</td></tr>";if("googleplayservices"!=e.name.toString()){let t=e.name.toString();"gpg"==t&&(t="googleplay"),i=`</td><td><a href="http://docs.sdkbox.com/en/plugins/${t}">Doc</a></td></tr>`}o.append("<tr><td>"+n+"</td><td>"+e.version.toString()+i)})}_queryProjectSdkboxInfo(t,e){this._showLoader(t),y.getInstance().getInstalledPlugins(t.path,(e,n)=>{n?l.showErrorBox("Query SDKBOX Info Failed",n):t.updatePluginsFromJSON(e),this._hideLoader(t),this._updateItem(t),this._updateDetails(t),t._lastQuery=Date.now()})}observerInstalledPlugin(t,e){if(!this._projects)return;const n=this._projects.get(e);if(!n)return;if(Date.now()-n._lastQuery<5e3)return;if(!t)return;this._detailsHtml.basics.location.text()===e&&(this._queryProjectSdkboxInfo(n),n._lastQuery=Date.now())}_updateAllPlugins(t){let e=[];Array.isArray(t.plugins)&&$(t.plugins).each((t,n)=>{e.push(n.name.toString())}),new m({creator_project_root:S.project,plugins:e,project:t.path,cmd:"update",installedPlugins:e}).show()}}},,,,,,,,,,,,,function(t,e,n){const o=n(25);t.exports=class{constructor(t){this._items=new Map,this._projectClass=t}add(t){let e=new this._projectClass(t);if(!e.validate())throw new Error(`This is path "${t}" is not project`);if(this._items.has(e.path))throw new Error(`This path "${t}" already imported`);return this._items.set(e.path,e),e}remove(t){o(this._items.has(t)),this._items.delete(t)}get(t){return o(this._items.has(t)),this._items.get(t)}first(){return this._items.values().next().value}clear(){this._items.clear()}count(){return this._items.size}}},function(t,e,n){const o="win32"===n(11).platform()?"\\":"/",i=n(7),r=(n(26),n(89));t.exports=class extends r{constructor(t){super(t,"cocos"),this._live=!1,this._plugins=[]}validate(){let t=this._path+o+".cocos-project.json";try{let e=JSON.parse(i.readFileSync(t));this._engine=e.engine_version}catch(t){return console.log("CocosProject.validate() failed: "+t.toString()),!1}return!0}get live(){return this._live}get plugins(){return this._plugins}updatePluginsFromJSON(t){let e=[];for(var n in t){let o=t[n],i={name:o.name,version:o.version.join(".")};e.push(i)}this._plugins=e.sort((t,e)=>t.name<e.name?-1:t.name>e.name?1:0)}}},function(t,e,n){const o="win32"===n(11).platform()?"\\":"/",i=n(7),r=n(2),s=(n(26),n(23)),a=n(89);t.exports=class extends a{constructor(t){super(t,"creator"),this._live=!1,this._plugins=[],this._template=null}validate(){let t=this._path+o+".cocos-project.json";s.isFile(t)?(this._template=r.basename(this._path),console.log("creator template:",this._template)):t=this._path+o+"project.json";try{let e=JSON.parse(i.readFileSync(t));this._engine=e.engine}catch(t){return console.log("CreatorProject.validate() failed: "+t.toString()),!1}return this._xcodeProjectEnable=!0,this._androidProjectEnable=!0,this.getXcodeProjects(),this.getAndroidProjects(),!0}get live(){return this._live}get plugins(){return this._plugins}get template(){return this._template}updatePluginsFromJSON(t){let e=[];for(var n in t){let o=t[n],i={name:o.name,version:o.version.join(".")};e.push(i)}this._plugins=e.sort((t,e)=>t.name<e.name?-1:t.name>e.name?1:0)}findFile(t){i.readFileSync(t).forEach(t=>{i.i})}searchFile(t,e){const n=[],o=function(t){let s=[];try{s=i.readdirSync(t)}catch(t){s=[]}s.forEach(s=>{let a=0;const l=r.join(t,s);if(e&&(a=e(l)),1==a)n.push(l);else if(2==a);else{i.statSync(l).isDirectory()&&o(l)}})};return o(t),n}getXcodeProjects(){const t=this,e=r.join(this._path,"frameworks","runtime-src","proj.ios_mac"),n=this.searchFile(e,(function(t){return t.endsWith(".xcodeproj")?1:t.endsWith(".framework")||t.endsWith(".xcassets")?2:0}));let o=!1;const i=[];return n.forEach(n=>{let s=r.relative(r.dirname(e),n);i.push(s),s==t._xcodeproj&&(o=!0)}),i.sort((function(t,e){return t.includes("backup")?1:e.includes("backup")?-1:0})),o||(this._xcodeproj=i[0]),i}setSelectXcodeProject(t){this._xcodeproj=t}getSelectXcodeProject(){return this._xcodeproj}setXcodeProjectEnable(t){this._xcodeProjectEnable=t}isXcodeProjectEnable(){return this._xcodeProjectEnable}getAndroidProjects(){const t=this,e=r.join(this._path,"frameworks","runtime-src"),n=this.searchFile(e,(function(t){return t.includes("proj.android")?1:2}));let o=!1;const i=[];return n.forEach(n=>{let s=r.relative(e,n);i.push(s),s==t._androidproj&&(o=!0)}),i.sort((function(t,e){return t.includes("backup")?1:e.includes("backup")?-1:0})),o||(this._androidproj=i[0]),i}setSelectAndroidProject(t){this._androidproj=t}getSelectAndroidProject(){return this._androidproj}setAndroidProjectEnable(t){this._androidProjectEnable=t}isAndroidProjectEnable(){return this._androidProjectEnable}}},function(t,e,n){const o=n(10).remote.dialog,i=n(10).remote.BrowserWindow,r=n(38),s=n(79),a=n(113),l=(n(90),n(91)),c=n(36),u=["ESSENTIALS","ANALYTICS","IAP OPTIMIZATION","APP STORES","AD UNITS","SOCIAL","ATTRIBUTION","PUSH NOTIFICATION","MORE"];class d{constructor(){this.plugins={},this._lastLoad=0,this.sdkbox_path=r.getSdkboxBinPath()}load(t){this._callback=t,c.getInstance().fetchManifest((t,e)=>{this._onLoadCallback(e,t,null)})}_onLoadCallback(t,e,n){try{if(t)throw new Error(t.toString());{let t=e.packages,n=[];Object.keys(t).forEach(e=>{if("SDKBOX"==e)return;let o=t[e];if(o.is_library)return;let i={name:e,display_name:o.display_name,category:o.category,description:o.description};Object.keys(o.versions).forEach(t=>{i.version=t}),n.push(i)}),this.plugins={},n.forEach(t=>{let e=this.plugins[t.category];e||(e=[]),e.push(t),this.plugins[t.category]=e}),this._lastLoad=Date.now(),"function"==typeof this._callback&&(this._callback(!0),this._callback=null)}}catch(t){o.showErrorBox("Download Plugins List Failed",t.toString()),"function"==typeof this._callback&&(this._callback(!1),this._callback=null)}}}t.exports=class{constructor(){this._dialog=getImportCocosPluginsDialog(),this._dialog.on("dialogclose",()=>{this._onClose()}),this._consoleDialog=s.getInstance(),this._queryInstallTapcoreDialog=new a,this._loaderHtml=this._dialog.find(".loader"),this._contentsHtml=this._dialog.find(".contents"),this._treeHtml=this._contentsHtml.find("> div"),this._treeComponentTpl=this._treeHtml.find(".tree-component"),this._list=new d,this.sdkbox_path=this._list.sdkbox_path}load(){r.isInstalled()&&this._list.load()}open(t,e){this._project=t,this._callback=e,this._loaderHtml.show(),this._contentsHtml.hide(),this._treeHtml.empty(),this._dialog.dialog("open"),this._list.load(e=>{e?this._updateTable(t):this._dialog.dialog("close")})}_onClose(){this._project=null,this._callback=null}_updateTable(t){this._loaderHtml.hide(),this._contentsHtml.show();let e=new Map;t.plugins.forEach(t=>{e.set(t.name,t)});let n=this._list.plugins;for(let t of u)n[t]&&this._treeHtml.append(this.genTreeComponent(t,n[t]));this.registerEvent()}genTreeComponent(t,e){let n=this._treeComponentTpl.clone();n.removeClass("hidden"),n.find(".tree-header-content").html(t);let o=1;return e.forEach(t=>{let e=t.name.toString();"gpg"==e&&(e="googleplay");const i=`\n            <div class="tree-item ${"tree-item-bg-"+o}">\n                <span class="tree-item-content">\n                    <a href="http://docs.sdkbox.com/en/plugins/${e}">${t.display_name}</a>\n                    <span class="tree-item-content-tip">${t.description}</span>\n                </span>\n                <button class="tree-item-action">Import</button>\n            </div>\n            `;n.find(".tree-content").append($(i)),o=(o+=1)>2?1:o}),n}registerEvent(){const t=this;this._treeHtml.find(".tree-header").on("click",(function(){const t=$(this).parent(),e=t.find(".tree-content"),n=e.is(":visible")?"-90":"0";e.toggle(100),t.find(".tree-header-icon").css({transform:"rotate("+n+"deg)"})})),this._treeHtml.find(".tree-item-action").on("click",(function(){const e=$(this).parent().find(".tree-item-content>a").get(0).firstChild.nodeValue.trim();t._onImportClick(c.getInstance().getPluginName(e),e)}))}_onImportClick(t,e){let n=[];if(n.push(t),0!==n.length)if("tapcore"==t)this._queryInstallTapcoreDialog.open(t=>{let e=this._callback,o=this._project;this._dialog.dialog("close"),this._callback=e,this._project=o,this._selected=n,this._importPlugin(t)});else{let t={type:"question",buttons:["Import","Cancel"],defaultId:0,title:"Confirm import selected plugins",message:"Confirm import selected plugins:",detail:e,cancelId:1};o.showMessageBox(i.getFocusedWindow(),t,t=>{if(0===t){let t=this._callback,e=this._project;this._dialog.dialog("close"),this._callback=t,this._project=e,this._selected=n,this._importPlugin()}})}else o.showErrorBox("Warning","Please select least one plugin")}_importFinish(){this._consoleDialog.enableClose();let t=this._callback;this._project=null,this._callback=null,t()}_importPlugin(t){c.getInstance().getInstalledPlugins(this._project.path,(e,i)=>{if(i)o.showErrorBox("Query SDKBOX Info Failed",i);else{new l({creator_project_root:n(23).queryParams().project,plugins:this._selected,project:this._project.path,cmd:"import",installedPlugins:Object.keys(e),tapcore_token:t}).show()}})}}},function(t,e){t.exports=class{constructor(){this._dialog=getQueryInstallTapCoreDialog(),this._dialog.on("dialogclose",()=>{this._onClose()}),this._dialog.wrapper=this}open(t){this._callback=t,this._dialog.dialog("open"),this._token=this._dialog.find(".tapcore-token")}import(){let t=this._token.val();void 0!==t&&0!=t.length?(this._callback&&this._callback(t),this._dialog.dialog("close")):alert("you must fill tapcore token before install tapcore")}_onClose(){this._callback=null}}},function(t,e,n){const o=n(11),i=n(7),r=n(2),s=n(87);let a;t.exports=class t{static getInstance(){return a||(a=new t),a}constructor(){let t=o.homedir();this._path=r.join(t,".sdkbox","conf","gui.json")}load(){try{let t=i.readFileSync(this._path);return JSON.parse(t)}catch(t){return console.log(t.toString()),null}}save(t){let e=JSON.stringify(t);const n=r.dirname(this._path);let o=null;try{o=i.statSync(n)}catch(t){o=null}o&&!o.isDirectory()||s.sync(r.dirname(this._path)),i.writeFileSync(this._path,e)}}},function(t,e){t.exports=require("url")},,function(t,e,n){"use strict";n.r(e);n(36);var o=n(95),i=n.n(o),r=n(96),s=n.n(r);let a,l="1.4.1",c=!1;const{shell:u,ipcRenderer:d}=n(10),f=n(115),h=function(t){let e=f.parse(t).protocol;return("http:"===e||"https:"===e)&&(u.openExternal(t),!0)};$(document).ready(()=>{document.title=`${document.title} (${l}${c?" Beta":""})`;const t=document.querySelectorAll('link[rel="import"]');let e=$("#contents");$(t).each((t,n)=>{let o=n.import.querySelector(".tab-template"),i=document.importNode(o.content,!0);e.append(i)}),$("webview").each((t,e)=>{e.addEventListener("did-finish-load",e=>{console.log(t,e)}),e.addEventListener("will-navigate",t=>{h(t.url)&&e.stop()})}),i.a.select_tab("cocos"),$("button").on("click",t=>{t.target.blur()}),a=new s.a,$("#tabbar").hide(),$("#contents").css("top","77px")}),$(document).on("click",'a[href^="http"]',(function(t){h(t.target.href)&&t.preventDefault()}))}])}));